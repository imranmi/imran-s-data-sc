<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Imran Ibrahim, Luo Zheng, Foo T’suen Wei, Joanna Teo &amp; Wu Bohan">
<meta name="dcterms.date" content="2024-09-08">

<title>Imran’s Postgrad repo - Project Ubin - An analysis of Phases 1 to 5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Imran’s Postgrad repo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-exercises-in-r" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Exercises in R</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-exercises-in-r">    
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex1/R_Ex1.html">
 <span class="dropdown-text">R Exercise 1 - Analysing PISA’s education survey data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex2/R_Ex2.html">
 <span class="dropdown-text">R Exercise 2 - 5 Exploratory Data Analyses on Pisa Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex3/R_Ex3.html">
 <span class="dropdown-text">R Exercise 3 - DataVis Makeover of another student’s work</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex4/R_Ex4.html">
 <span class="dropdown-text">R Exercise 4 - Be Weatherwise or Otherwise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex5/R_Ex5.html">
 <span class="dropdown-text">R Exercise 5 - Visual Analytics exercise on Armed conflicts</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex6/R_Ex6.html">
 <span class="dropdown-text">R Exercise 6 - Geospatial 1- Local Measures of Spatial Autocorrelation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex7/R_Ex7.html">
 <span class="dropdown-text">R Exercise 7 - Geospatial 2 - Emerging Hot Spot Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex8/R_Ex8.html">
 <span class="dropdown-text">R Exercise 8 - Geospatial 3 - Spatially Constrained Clustering</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex9/R_Ex9.html">
 <span class="dropdown-text">Group Project Poster - Analysing Armed conflicts in Myammar</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-exercises-in-python" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Exercises in Python</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-exercises-in-python">    
        <li>
    <a class="dropdown-item" href="../../Python-ex/Python-Ex1/Python_Ex1.html">
 <span class="dropdown-text">Python Exercise 1 - Automating a 3-stocks portfolio</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Python-ex/Python-Ex2/Python_Ex2.html">
 <span class="dropdown-text">Python Exercise 2 - Designing a 3-stock portfolio for a robo-advisor</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Python-ex/Python-Ex3/Python_Ex3.html">
 <span class="dropdown-text">Python Project - Predicting Stock Prices with Time series Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sas-viya-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">SAS Viya Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sas-viya-exercises">    
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex1/Write_Ex1.html">
 <span class="dropdown-text">Assignment 1 - Show me the numbers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex2/Write_Ex2.html">
 <span class="dropdown-text">Assignment 2 - Be Customer wise or otherwise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex3/Write_Ex3.html">
 <span class="dropdown-text">Project - Loan Default prediction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex4/Write_Ex4.html">
 <span class="dropdown-text">Project Poster - Loan Default prediction</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-fintech-assignments" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Fintech Assignments</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-fintech-assignments">    
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex1/Article_Ex1.html">
 <span class="dropdown-text">Assignment 1 - Factors contributing to the rise of Fintech companies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex2/Article_Ex2.html">
 <span class="dropdown-text">Assignment 2 - How Banks have changed the way they deploy technology</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex3/Article_Ex3.html">
 <span class="dropdown-text">Assignment 3 - How the role of financial regulators has evolved</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex4/Article_Ex4.html">
 <span class="dropdown-text">Assignment 4 - Key characteristics that create or inject value for a NFT</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex5/Article_Ex5.html">
 <span class="dropdown-text">Assignment 5 - Bitcoin - Examining a Layer 1 &amp; 2 solution</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex6/Article_Ex6.html">
 <span class="dropdown-text">Assignment 6 - Examining the working principles and the future of DeFi</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex7/Article_Ex7.html">
 <span class="dropdown-text">Assignment 7 - Design considerations for a CBDC project</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex8/Article_Ex8.html">
 <span class="dropdown-text">Assignment 8 - Consortium blockchain for Finance lease use case</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex9/Article_Ex9.html">
 <span class="dropdown-text">Assignment 9 - Quantum Computing - Mean-Variance Portfolio Optimization</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex14/Article_Ex14.html">
 <span class="dropdown-text">Assignment 10 - Can ChatGPT or chatbots replace Search Engines?</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-fintech-projects" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Fintech Projects</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-fintech-projects">    
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex10/Article_Ex10.html">
 <span class="dropdown-text">Project 1 - Quantum Computing - Portfolio Optimisation using Hybrid Algorithm</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex11/Article_Ex11.html">
 <span class="dropdown-text">Project 2 - Integrated IOT Data for Sustainability Use Case</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex12/Article_Ex12.html">
 <span class="dropdown-text">Project 3 - Data Quality as the Key enabler of Innovation and Digitisation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex13/Article_Ex13.html">
 <span class="dropdown-text">Project 4 - Emerging Fintech Trends in Indonesia</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex15/Article_Ex15.html">
 <span class="dropdown-text">Project 5 - Project Ubin - An analysis of Phases 1-5</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="../../about.html" title="About Imran" class="quarto-navigation-tool px-1" aria-label="About Imran"><i class="bi bi-house-heart"></i></a>
    <a href="https://github.com/imranmi/imran-s-data-sc" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/imran-ibrahim-116a236b" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">1. Introduction</a></li>
  <li><a href="#phase-1---exploring-the-potential-of-blockchain" id="toc-phase-1---exploring-the-potential-of-blockchain" class="nav-link" data-scroll-target="#phase-1---exploring-the-potential-of-blockchain">2. Phase 1 - Exploring the potential of Blockchain</a>
  <ul class="collapse">
  <li><a href="#phase-1-objectives" id="toc-phase-1-objectives" class="nav-link" data-scroll-target="#phase-1-objectives">2.1 Phase 1 Objectives</a></li>
  <li><a href="#prototype-design" id="toc-prototype-design" class="nav-link" data-scroll-target="#prototype-design">2.2 Prototype Design</a></li>
  <li><a href="#findings-and-future-focus" id="toc-findings-and-future-focus" class="nav-link" data-scroll-target="#findings-and-future-focus">2.3 Findings and Future focus</a></li>
  </ul></li>
  <li><a href="#phase-2---exploring-the-use-of-dlt-for-rtgs" id="toc-phase-2---exploring-the-use-of-dlt-for-rtgs" class="nav-link" data-scroll-target="#phase-2---exploring-the-use-of-dlt-for-rtgs">3. Phase 2 - Exploring the use of DLT for RTGS</a>
  <ul class="collapse">
  <li><a href="#phase-2-objectives" id="toc-phase-2-objectives" class="nav-link" data-scroll-target="#phase-2-objectives">3.1 Phase 2 Objectives</a></li>
  <li><a href="#key-findings-for-phase-2" id="toc-key-findings-for-phase-2" class="nav-link" data-scroll-target="#key-findings-for-phase-2">3.2 Key Findings for Phase 2</a></li>
  <li><a href="#observations-on-phase-2" id="toc-observations-on-phase-2" class="nav-link" data-scroll-target="#observations-on-phase-2">3.3 Observations on Phase 2</a></li>
  </ul></li>
  <li><a href="#phase-3---delivery-vs-payment-on-dlt" id="toc-phase-3---delivery-vs-payment-on-dlt" class="nav-link" data-scroll-target="#phase-3---delivery-vs-payment-on-dlt">4. Phase 3 - Delivery Vs Payment on DLT</a>
  <ul class="collapse">
  <li><a href="#phase-3-objectives" id="toc-phase-3-objectives" class="nav-link" data-scroll-target="#phase-3-objectives">4.1 Phase 3 Objectives</a></li>
  <li><a href="#prototype-design-1" id="toc-prototype-design-1" class="nav-link" data-scroll-target="#prototype-design-1">4.2 Prototype Design</a></li>
  <li><a href="#challenges-and-opportunities-for-banks-and-brokers" id="toc-challenges-and-opportunities-for-banks-and-brokers" class="nav-link" data-scroll-target="#challenges-and-opportunities-for-banks-and-brokers">4.3 Challenges and Opportunities for Banks and Brokers</a></li>
  </ul></li>
  <li><a href="#phase-4---cross-border-payments" id="toc-phase-4---cross-border-payments" class="nav-link" data-scroll-target="#phase-4---cross-border-payments">5. Phase 4 - Cross border payments</a>
  <ul class="collapse">
  <li><a href="#phase-4-objectives" id="toc-phase-4-objectives" class="nav-link" data-scroll-target="#phase-4-objectives">5.1 Phase 4 Objectives</a></li>
  <li><a href="#phase-4-prototypes" id="toc-phase-4-prototypes" class="nav-link" data-scroll-target="#phase-4-prototypes">5.2 Phase 4 prototypes</a></li>
  <li><a href="#beyond-lessons---proof-of-concept" id="toc-beyond-lessons---proof-of-concept" class="nav-link" data-scroll-target="#beyond-lessons---proof-of-concept">5.3 Beyond Lessons - Proof of Concept</a></li>
  </ul></li>
  <li><a href="#phase-5---proving-value-of-blockchain-technology" id="toc-phase-5---proving-value-of-blockchain-technology" class="nav-link" data-scroll-target="#phase-5---proving-value-of-blockchain-technology">6. Phase 5 - Proving Value of Blockchain Technology</a>
  <ul class="collapse">
  <li><a href="#phase-5-objectives" id="toc-phase-5-objectives" class="nav-link" data-scroll-target="#phase-5-objectives">6.1 Phase 5 objectives</a></li>
  <li><a href="#phase-5-details" id="toc-phase-5-details" class="nav-link" data-scroll-target="#phase-5-details">6.2 Phase 5 details</a></li>
  <li><a href="#phase-5-prototype-design" id="toc-phase-5-prototype-design" class="nav-link" data-scroll-target="#phase-5-prototype-design">6.3 Phase 5 Prototype design</a></li>
  <li><a href="#phase-5-commercial-use-cases" id="toc-phase-5-commercial-use-cases" class="nav-link" data-scroll-target="#phase-5-commercial-use-cases">6.4 Phase 5 commercial use cases</a>
  <ul class="collapse">
  <li><a href="#case-study-1---private-securities-exchange" id="toc-case-study-1---private-securities-exchange" class="nav-link" data-scroll-target="#case-study-1---private-securities-exchange">Case Study 1 - Private securities exchange</a></li>
  <li><a href="#case-study-2---tokenised-bonds-and-payments" id="toc-case-study-2---tokenised-bonds-and-payments" class="nav-link" data-scroll-target="#case-study-2---tokenised-bonds-and-payments">Case Study 2 - Tokenised bonds and payments</a></li>
  <li><a href="#case-study-3---cross-border-settlement-of-digital-securities-and-dividends" id="toc-case-study-3---cross-border-settlement-of-digital-securities-and-dividends" class="nav-link" data-scroll-target="#case-study-3---cross-border-settlement-of-digital-securities-and-dividends">Case Study 3 - Cross border settlement of digital securities and dividends</a></li>
  <li><a href="#case-study-4---trade-document-exchange-and-payments-processing" id="toc-case-study-4---trade-document-exchange-and-payments-processing" class="nav-link" data-scroll-target="#case-study-4---trade-document-exchange-and-payments-processing">Case Study 4 - Trade document exchange and payments processing</a></li>
  <li><a href="#case-study-5---supply-chain-finance" id="toc-case-study-5---supply-chain-finance" class="nav-link" data-scroll-target="#case-study-5---supply-chain-finance">Case Study 5 - Supply Chain finance</a></li>
  <li><a href="#case-study-6---healthcare-claims" id="toc-case-study-6---healthcare-claims" class="nav-link" data-scroll-target="#case-study-6---healthcare-claims">Case Study 6 - Healthcare claims</a></li>
  <li><a href="#case-study-7---payments-for-programmatic-advertising" id="toc-case-study-7---payments-for-programmatic-advertising" class="nav-link" data-scroll-target="#case-study-7---payments-for-programmatic-advertising">Case Study 7 - Payments for programmatic Advertising</a></li>
  <li><a href="#case-study-8---salary-payments" id="toc-case-study-8---salary-payments" class="nav-link" data-scroll-target="#case-study-8---salary-payments">Case Study 8 - Salary payments</a></li>
  </ul></li>
  <li><a href="#key-insights" id="toc-key-insights" class="nav-link" data-scroll-target="#key-insights">6.5 Key Insights</a>
  <ul class="collapse">
  <li><a href="#lessons-learnt" id="toc-lessons-learnt" class="nav-link" data-scroll-target="#lessons-learnt">Lessons Learnt</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#way-ahead" id="toc-way-ahead" class="nav-link" data-scroll-target="#way-ahead">7. Way Ahead</a></li>
  <li><a href="#conclusion" id="toc-conclusion" class="nav-link" data-scroll-target="#conclusion">7. Conclusion</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">8. References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Project Ubin - An analysis of Phases 1 to 5</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Imran Ibrahim, Luo Zheng, Foo T’suen Wei, Joanna Teo &amp; Wu Bohan </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 8, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">September 8, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<section id="introduction" class="level1">
<h1>1. Introduction</h1>
<p>Project Ubin was a multi-year collaborative project conducted by the Monetary Authority of Singapore (MAS), in collaboration with the Financial Services Industry to explore the use of Distributed Ledger Technology (DLT) for the clearing and settlement of payments and securities.</p>
<p>Announced in Nov 2016, the project aims to help MAS and the industry better understand the technology and its potential benefits through practical experimentation. This report aims to provide a summary of the 5 phases of Project Ubin and shed light on the insights gained and lessons learnt in each phase and overall.</p>
</section>
<section id="phase-1---exploring-the-potential-of-blockchain" class="level1">
<h1>2. Phase 1 - Exploring the potential of Blockchain</h1>
<p>Project Ubin was conceived as an opportunity for Singapore to take a leading role in the research on DLT and Central Bank Digital Currencies (CBDCs). In Phase 1, the project assessed the technical feasibility of using a tokenised form of the Singapore Dollar (SGD) issued by the central bank for inter-bank payments and settlement on a distributed ledger.</p>
<section id="phase-1-objectives" class="level2">
<h2 class="anchored" data-anchor-id="phase-1-objectives">2.1 Phase 1 Objectives</h2>
<p>The objective in Phase 1 was separated into two parts, technical and research workstreams. The former was to build a proof-of-concept for a domestic payments system or inter-bank obligations on a Distributed Ledger and the latter was to identify non-technical implications of implementing DLT in a production environment.</p>
<p>The project leveraged on MAS’s MEPS+ system to explore the ability to issue funds and enable real-time fund transfers on a Distributed Ledger. This could pave the way for true Delivery vs Payment (DVP) and real-time settlement, reducing existing frictions like late payments, payment failures, intermediaries, and counterparty risk.</p>
</section>
<section id="prototype-design" class="level2">
<h2 class="anchored" data-anchor-id="prototype-design">2.2 Prototype Design</h2>
<p>The Phase 1 prototype adapted several features from the R3 Jasper Project in Canada but followed a “continuous depository receipt model”, which could allow commercial banks to exchange cash collateral for Depository Receipts (DR) on a distributed ledger. The feasibility and benefits of DLT can be seen in Fig 1.1.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2290880194.png" class="img-fluid figure-img"></p>
<figcaption>Fig 1.1 Feasibility and Benefits of DLT (Project Ubin Phase 1 report, MAS)</figcaption>
</figure>
</div>
<p>An Ethereum-based Distributed Ledger network was created to integrate with the current MEPS+ and RTGS systems, facilitating the development of a functional integrated transfer prototype (Fig 1.2).</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2732029707.png" class="img-fluid figure-img"></p>
<figcaption>Fig 1.2 High-level architecture depicting how various parts interact with one another (Project Ubin Phase 1 report, MAS)</figcaption>
</figure>
</div>
<p>Participant banks would first pledge cash into a custody account held at the central bank (MAS). The funds in participant’s blockchain accounts would then be used as cash collateral in exchange for Depository Receipts issued. Upon verification of the collateral, MAS would then issue an equal value in Depository Receipts, which would then flow to participant wallets through smart contracts. Upon receiving their Depository Receipts from MAS, banks were then free to make transfers to each other (Fig 1.3).</p>
<p>During the prototype development stage, the research workstream had also identified relevant Monetary and Financial regulations and evaluated the prototype’s ability to satisfy these regulations within the broader financial system.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-1836620267.png" class="img-fluid figure-img"></p>
<figcaption>Fig 1.3 Process diagram of Phase 1. (Project Ubin Phase 1 report, MAS)</figcaption>
</figure>
</div>
</section>
<section id="findings-and-future-focus" class="level2">
<h2 class="anchored" data-anchor-id="findings-and-future-focus">2.3 Findings and Future focus</h2>
<p>In Phase 1, an interbank transfer prototype on a private Ethereum network was successfully created, enabling the reduction of credit risks between participants when making payments and increasing the transparency of transactions. This improved transparency could eventually facilitate improvements in liquidity management, enabling participants to replace and optimize pledged collateral more efficiently.</p>
<p>However, the conclusion of Phase 1 revealed many potential challenges as well. For example, Credit and Liquidity risks inherent in the Ethereum network would first need to be evaluated for possible spill over into the existing financial system.</p>
<p>It was also noted that a new legal framework would likely be required to ensure that transfers of the Digital SGD could be treated the same as existing versions of central bank money. Additionally, advanced liquidity management techniques to manage the new Digital SGD would need to be evaluated in order to avoid risks spilling to the existing financial system.</p>
</section>
</section>
<section id="phase-2---exploring-the-use-of-dlt-for-rtgs" class="level1">
<h1>3. Phase 2 - Exploring the use of DLT for RTGS</h1>
<p>Phase 2 was a collaborative design and prototyping project, exploring the use of DLT for Real Time Gross Settlement (RTGS) systems.</p>
<p>Led by MAS and the Association of Banks in Singapore (ABS), a consortium of 11 banks and 5 technology partners developed software prototypes on three different DLT platforms (Corda, Hyberledger Fabric and Quorum) for decentralised inter-bank payments and settlements.</p>
<p>The project explored the use of Distributed Ledger Technology for specific functionalities, focusing on the feasibility of decentralising Liquidity Savings Mechanisms(LSM) while maintaining the privacy of banking transactions.</p>
<section id="phase-2-objectives" class="level2">
<h2 class="anchored" data-anchor-id="phase-2-objectives">3.1 Phase 2 Objectives</h2>
<p>The objective of Phase 2 was to develop three prototypes with specific RTGS functionalities. Each prototype was developed using different DLT platforms, Corda, Hyperledger Fabric and Quorum, running on a common cloud platform, Microsoft Azure.</p>
<p>The prototypes were developed to address 6 key criteria: Decentralised processing, Digitalisation of payments, Payment queue handling, Privacy of transactions, Settlement Finality and Liquidity Optimisation (Fig 2.4).</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-351049641.png" class="img-fluid figure-img"></p>
<figcaption>Figure 2.4: Functional scope of Project Ubin Phase 2 (Project Ubin, Phase 2 report, MAS)</figcaption>
</figure>
</div>
<p>Phase 2 revolves around the optimized netting of payments while preserving transactional privacy. Current Real-Time Gross Settlement (RTGS) systems operate on centralized infrastructure which risk being a single point of failure. It was hoped that DLT could be used as a means to remedy this situation and enable a payments system robust enough to process large volumes of transactions seamlessly while also being able to reduce liquidity gridlocks. The capability to resolve gridlocks is termed as Liquidity Saving Mechanism (LSM). The prospect of a distributed platform also opens doors for a “24/7 Singapore”, which can be beneficial for continuous trade with the global economy.</p>
</section>
<section id="key-findings-for-phase-2" class="level2">
<h2 class="anchored" data-anchor-id="key-findings-for-phase-2">3.2 Key Findings for Phase 2</h2>
<p>Phase 2 was announced as a success when all three prototypes proved to be capable of gridlock resolution. Corda developed a new cycle-based algorithm called “Cycle-solver”, where netting cycles are identified and optimized. On the other hand, both Hyperledger and Quorum used the EAF2 algorithm to detect and identify gridlock resolutions.</p>
<p>In terms of privacy, all 3 prototypes had employed various privacy preserving design features and algorithms. For example, Corda used confidential identities for each transaction, where only authorised parties could identify each other. Hyperledger used channels to restrict interactions between authorised parties while Quorum used Zero-Knowledge proofs (ZKPs) to prevent the outflow of sensitive information.</p>
</section>
<section id="observations-on-phase-2" class="level2">
<h2 class="anchored" data-anchor-id="observations-on-phase-2">3.3 Observations on Phase 2</h2>
<p>Although MAS had claimed Phase 2 to be a success, we noted that there were a few flaws in prototype development. For example, all prototypes had used Microsoft Azure, a cloud platform, which is hosted on different virtual machines. In the report, it was not clear whether factors such as latency and compatibility issues were considered, since latency issues impacting the same cloud provider could be experienced in all 3 prototypes. Further, there is no way to prove that the transactions were kept private since they are hosted on foreign servers.</p>
<p>According to MAS, it is possible to have a payments network be fully decentralized. However, this would be challenging in reality, since each “node” belonging to a bank, might differ in ability. Smaller banks with smaller transaction volumes might not be able to cope with or bear the cost of maintaining a distributed ledger as compared with banks with higher transaction volumes.</p>
<p>Additionally, all participating banks would need to maintain and operate their own nodes. Hardware and software would need to be maintained frequently to ensure consistent performance across the network. The traditional role of the central bank as the infrastructure operator would also have to be re-evaluated. For example, MAS could in the future, be relegated to lesser roles such as a “Liquidity Manager” or “System Auditor/Mediator”.</p>
<p>Gridlock resolution in a distributed system could also lead to undesirable consequences, especially when participants favour their own corporate interests above others. For example, a single bank could by itself instigate a gridlock resolution to its favour, disadvantaging other participating banks who may find themselves bearing the risk of temporary gaps in liquidity.</p>
</section>
</section>
<section id="phase-3---delivery-vs-payment-on-dlt" class="level1">
<h1>4. Phase 3 - Delivery Vs Payment on DLT</h1>
<p>Phase 3 centres around a collaboration between MAS and Singapore Exchange (SGX) to develop Delivery Vs Payment (DvP) capabilities for tokenised securities. This project aims to establish inter ledger interoperability and settlement finality for DvP transactions across two separate cash and securities ledgers, starting with tokenised Singapore Government Securities (SGS) and central bank-issued cash-depository receipts (CDRs) or Digital SGD.</p>
<p>This advancement would allow Financial Institutions and corporate investors to exchange and settle tokenised securities against digital currencies, reducing prevailing settlement risks and operational inefficiencies found in the current settlement system. For example, equities trading in SGX is only settled on Trade date + 2, when the Central Depository (CDP) determines whether a trade is successful during its final settlement run. When sellers fail to deliver sufficient securities, CDP initiates a buy-in process to cover the difference and help buyers achieve transaction finality. Potentially, this process can po be further delayed for an additional 6 days should the buy-in process be unsuccessful on Trade date +2.</p>
<section id="phase-3-objectives" class="level2">
<h2 class="anchored" data-anchor-id="phase-3-objectives">4.1 Phase 3 Objectives</h2>
<p>Phase 3 focused on the design and creation of DvP-on-DLT prototypes that could accomplish the following:</p>
<ol type="1">
<li><p>Interledger interoperability between cash and securities ledgers on separate DLT platforms</p></li>
<li><p>Mitigation of counterparty risks in DvP</p></li>
<li><p>Achievement of DvP settlement finality with clearing members by trade participants</p></li>
<li><p>Strengthening of investor confidence and an enhanced user experience</p></li>
</ol>
<p>In conventional settlement systems, participating financial institutions must be connected to central operators (clearing houses and central banks) to settle transactions. This represents a single point of failure in a closed loop centralised system. By utilizing DLT to connect cash and securities ledgers, the dependence on central infrastructures could be removed. Furthermore, distributing control and obligations to direct participants could also strengthen network security by reducing centralized vulnerabilities.</p>
<p>Technology partners Anquan Capital, Deloitte, and Nasdaq created three distinct prototypes (fig 3.2), to experiment on the transfer of tokenized SGS and CDRs (Digital SGD) across different DLT systems on a trade-by-trade basis.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-3168966316.png" class="img-fluid figure-img"></p>
<figcaption>Fig 3.2 : The different platforms used in the 3 prototypes. Source: (Project Ubin Phase 3 report, MAS)</figcaption>
</figure>
</div>
</section>
<section id="prototype-design-1" class="level2">
<h2 class="anchored" data-anchor-id="prototype-design-1">4.2 Prototype Design</h2>
<p>Prototype designs in Phase 3 preserve the role of a Recognized Market Operator (RMO) and as a trusted party and arbitrator for contract disputes or settlement failures. For transactions to be successfully concluded, trade participants are imposed with specified time boundaries. Trade agreements comprises of two sets of asset transfers: (i) securities from seller to buyer within 48 hours, and (ii) cash from buyer to seller within 24 hours. Should buyers and sellers both discharge their obligations expeditiously, it is likely that settlement can be achieved within 24 hours or T+1 at the earliest, a marked improvement from the existing T+2 settlement.</p>
<p>Through smart contracts, “Contract Locks” protect against payment and delivery defaults by rendering the committed cash and securities unusable on respective ledgers. Where transactions fail and Smart contract logic is unable to achieve fair settlement, arbitrators can step in to resolve disputes and recover assets. Investor protection is also safeguarded through use of two-of-three multi-signature conditions to verify and effect transactions. For example, in a trade involving three participants (buyer, seller, arbitrator), no single participant can remove or steal assets without the others’ knowledge and approval. An arbitrator may also resolve disputes by intercepting fraudulent transactions using an escrow private key.</p>
<p>Secrets and unique hash passwords are used as means to effect and verify asset transfers between buyers and sellers. This secret is generated by the RMO and sent to participants as encrypted and password-protected PDF files. The PDF file enables trade participants to verify the recipients of transactions using their public key or encrypted address. This secure PDF is sent off-chain and off-band and will not be stored or propagated on the blockchain.</p>
</section>
<section id="challenges-and-opportunities-for-banks-and-brokers" class="level2">
<h2 class="anchored" data-anchor-id="challenges-and-opportunities-for-banks-and-brokers">4.3 Challenges and Opportunities for Banks and Brokers</h2>
<p>The introduction of DLT settlement systems may pose several challenges for incumbent banks and brokers. For example, banks may need to upgrade their existing systems and processes to connect with the new systems. Similarly, where existing settlement systems and processes have already been broadly integrated into existing bank systems like core banking, the introduction of new DLT settlement systems raises questions on whether they will be interoperable with existing systems or whether additional integration work will be required in future. Shorter settlement cycles from the use of DLT may also increase operational complexity due to the higher volume of trades to be settled in shorter time frames. This may require additional resources like staffing and infrastructure to manage daily settlement processes. Regulators may also revise their requirements, imposing more frequent reporting obligations and compliance checks in line with shorter settlement cycles.</p>
<p>On the other hand, DLT systems could bring about significant efficiencies in trade settlement which could lead to the elimination of manual processes and the optimization of resources, resulting in cost savings. DLT settlement would enable trade participants to directly verify and confirm trades. This increased involvement by participants could reduce settlement failures and its associated risks. A transparent and more efficient settlement process would also likely improve customer experience and satisfaction. Beyond traditional asset classes, alternative assets like real estate and art could also be tokenised in the future and be traded in liquid markets globally. This may present new business opportunities and revenue streams for Banks in the future.</p>
</section>
</section>
<section id="phase-4---cross-border-payments" class="level1">
<h1>5. Phase 4 - Cross border payments</h1>
<p>Phase 4 takes Project Ubin beyond Singapore shores and saw a cross-jurisdictional collaboration between the Bank of Canada (BoC), the Bank of England (BoE), and MAS to focus on enhancing cross-border payments and settlements by exploring alternative models for processing cross-border transactions.</p>
<p>This phase was also supported by financial institutions like HSBC, Overseas-Chinese Banking Corporation (OCBC), the Toronto-Dominion Bank (TD), United Overseas Bank (UOB) and Payments Canada. This project was built on top of previous projects such as Project Jasper by the BoC and Project Ubin’s earlier phases.</p>
<section id="phase-4-objectives" class="level2">
<h2 class="anchored" data-anchor-id="phase-4-objectives">5.1 Phase 4 Objectives</h2>
<p>Phase 4 was set out to fulfil the following objectives:</p>
<ol type="1">
<li><p>Examine the root causes of challenges in cross-border transaction and assess current initiatives that seek to address the pain points</p></li>
<li><p>Explore potential, hypothetical future-state capabilities and models, compare relative benefits, and evaluate how these proposals mitigate the challenges identified</p></li>
<li><p>Set out a framework to provide reference for the global financial community for possible next steps for both technical and policy work seeking to address pain points</p></li>
</ol>
</section>
<section id="phase-4-prototypes" class="level2">
<h2 class="anchored" data-anchor-id="phase-4-prototypes">5.2 Phase 4 prototypes</h2>
<p>Three key models of cross-border payments were examined during this phase.&nbsp;The models were conceptualised with referenced to addressing the root causes and achieving future-state. (Table 1) which will in turn improve access, speed and transparency of cross-border payments.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2161028872.png" class="img-fluid figure-img"></p>
<figcaption>Table 1: Identified Root causes and Potential Future state capabilities</figcaption>
</figure>
</div>
<p>The first two models were built on existing domestic interbank payment systems using traditional technology. The third model, which is our focus, has 3 variations that focuses on the use of Wholesale Central Bank Digital Currency (W-CBDC) and its various applications through DLT.<br>
<br>
The following are some of the learnings with regards to each model’s benefits and concerns:</p>
<ol type="1">
<li><strong>Model 3a</strong>: Currency-Specific W-CBDCs, Transmitted &amp; Exchange Only Within Home Jurisdictions</li>
</ol>
<p><u><strong>Key Benefits</strong></u>: Provides 24-7 availability and interoperability between members. This is akin to a tokenized version of the existing correspondent banking model where we could obtain better visibility of payment statuses using ISO2022 standards, without relying on external providers like SWIFT</p>
<p><u><strong>Key Considerations</strong></u>: Existing challenges associated with the current correspondent banking model could still persist. Banks with liquidity in multiple digital currencies would offer services to those without. This could cause “trapped liquidity”, requiring more effort to monitor positions and manage balance sheets to avoid credit risks since corresponding banks would need to fund their W-CBDC accounts.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2303152700.png" class="img-fluid figure-img"></p>
<figcaption>Model 3a: Currency-Specific W-CBDCs, Transmitted &amp; Exchange Only Within Home Jurisdictions</figcaption>
</figure>
</div>
<ol start="2" type="1">
<li><strong>Model 3b</strong>: Currency-Specific W-CBDCs, Transmitted &amp; Exchange Beyond Home Jurisdictions</li>
</ol>
<p><u><strong>Key Benefits</strong></u>: On top of the benefits of Model 3a, this extension beyond home offers the possibility of greater efficiency, with reduced reliance on the correspondent banking model via peer-to-peer exchange.</p>
<p><u><strong>Key Considerations</strong></u>: It requires commercial banks to open and hold multicurrency wallets in each RTGS. This would also impact central banks and their monetary policies since a tokenized version of their reserves being made available in foreign jurisdictions. Banks will also need to manage their Balance sheets intraday and manage their overnight liabilities. This model will require more compliance frameworks and institutional onboarding measures to be set, to broaden access to central bank reserves. There is also exchange rate risk exposure from the use of central bank reserves to collateralise the holding of a foreign digital currency . There is also a possibility of a parallel market for exchange of W-CBDCs within each jurisdiction.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-451554206.png" class="img-fluid figure-img"></p>
<figcaption>Model 3b: Currency-Specific W-CBDCs, Transmitted and Exchange Beyond Home Jurisdictions</figcaption>
</figure>
</div>
<ol start="3" type="1">
<li>Model 3c: Universal W-CBDC Backed by A Basket of Currencies and Accepted By All Participating Jurisdictions</li>
</ol>
<p><u><strong>Key Benefits</strong></u>: Having a universally accepted digital currency for W-CBDCs could potentially be more easily implemented in more jurisdictions as it is not impacted by many of the policy challenges outlined in Model 3a and Model 3b.</p>
<p><u><strong>Key Considerations</strong></u>: With a new currency, the U-W-CBDC is subjected to volatility, potential manipulation, and investment activity. This could mean more work for central banks to monitor the supply of funds extended to the U-W-CBDC and new frameworks and policies for collateralisation with respect to volatile intraday exchange rates. This could also represent a single point of failure in this model.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-3135392951.png" class="img-fluid figure-img"></p>
<figcaption>Model 3c: Universal W-CBDC Backed by A Basket of Currencies and Accepted By All Participating Jurisdictions</figcaption>
</figure>
</div>
</section>
<section id="beyond-lessons---proof-of-concept" class="level2">
<h2 class="anchored" data-anchor-id="beyond-lessons---proof-of-concept">5.3 Beyond Lessons - Proof of Concept</h2>
<p>Riding on the learnings from Project Jasper and Project Ubin, the Bank of Canada (BoC) and Monetary Authority of Singapore (MAS) collaborated to test the hypothesis that DLT could enable greater efficiencies and reduce risks in cross-border payments and settlements. They explored the architecture that supported Models 3a, 3b and 3c, to uncover the technical challenges while implementing these models.</p>
<p>A proof of concept (POC) to experiment an all-or-nothing guarantee through an atomic settlement for a Canadian dollar (CAD) – Singapore Dollar (SGD) payment across 2 DLT platforms based on a Hash Time-Locked Contracts (HTLC), a form of smart contracts, to pass messages between 2 systems (Fig 4.1) was experimented with.</p>
<p>The outcome was a successful demonstration of a cross border, cross-currency, cross-platform atomic transaction without the need for a trusted third party (for example, SWIFT). The emphasis of the need for international cooperation and collaboration came out as a strong learning point for trust and openness to flourish in such high stake projects.</p>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-232997444.png" class="img-fluid figure-img"></p>
<figcaption>Figure 4.1: Overview of a Hash Time Locked Contract</figcaption>
</figure>
</div>
</section>
</section>
<section id="phase-5---proving-value-of-blockchain-technology" class="level1">
<h1>6. Phase 5 - Proving Value of Blockchain Technology</h1>
<p>Phase 5 was intended to be the last experimental phase of Project Ubin. With advances in blockchain technology and a good level of understanding of the technology and its applications within the global financial industry, there are only limited technical concepts yet to be proven or explored. Phase 5 therefore focused on proving value and building a foundation for future live pilots and trials by the industry (Monetary Authority of Singapore, 2021).&nbsp;</p>
<section id="phase-5-objectives" class="level2">
<h2 class="anchored" data-anchor-id="phase-5-objectives">6.1 Phase 5 objectives</h2>
<p>The fifth and final phase of Project Ubin was focused on achieving commercial adoption of blockchain technology, a critical milestone for the widespread implementation and scaling of blockchain-based solutions in the financial industry. In this phase, MAS collaborated with industry partners to explore the use of blockchain technology for a range of financial use cases, including cross-border payments, securities settlement, and digital identities.</p>
</section>
<section id="phase-5-details" class="level2">
<h2 class="anchored" data-anchor-id="phase-5-details">6.2 Phase 5 details</h2>
<p>MAS collaborated with several financial institutions, including J.P. Morgan, Accenture and Temasek, to develop and test the Ubin V Payment Network. The prototype was built on Quorum, an enterprise-grade blockchain platform developed by J.P. Morgan, and used smart contracts to automate payment and settlement processes. Ubin V Payment Network was able to demonstrate several key features including real-time gross settlement and atomic delivery-versus-payment settlement. It also enabled participants to transact in multiple currencies, with automatic currency conversion and cross-currency payments.</p>
</section>
<section id="phase-5-prototype-design" class="level2">
<h2 class="anchored" data-anchor-id="phase-5-prototype-design">6.3 Phase 5 Prototype design</h2>
<p>The Ubin V Payment Network is the fifth and most recent phase of Project Ubin, a series of blockchain technology projects initiated by MAS to explore the potential of blockchain and distributed ledger technology for clearing and settling payments and securities. The Ubin V Payment Network enables participants to transact in multiple currencies, with automatic currency conversion and cross-currency payments. It provides real-time gross settlement and atomic delivery-versus-payment settlement, which reduces the cost and risk of cross-border transactions. The key features of Ubin V are as follows:</p>
<ol type="1">
<li><p><u>Issuance</u>: Commitment of deposits in a designated account in exchange for the equivalent value of digital tokens such as JPM Coin USD and digital SGD on the network.</p></li>
<li><p><u>Transfer</u>: Transaction of digital tokens over the Ubin payments network with other network participants.</p></li>
<li><p><u>Redemption</u>: Conversion of digital tokens back to fiat currency.</p></li>
<li><p><u>Conditional Payments</u>: Smart contracts that hold funds and release payment upon fulfilment of pre-defined conditions. An example would be a Multi-Signature (Multisig) Escrow Service, which is a digital escrow service utilizing the Multi-sig model, to hold funds while a transaction is completed on the delivery network.</p></li>
<li><p><u>Reconciliation</u>: Matching the total outstanding tokenised balance with the actual deposit balance by issuer banks, and tracking transaction records by non-issuer banks.</p></li>
</ol>
<p><u><strong>Motivation and Objectives:</strong></u></p>
<ol type="1">
<li>Technical Development:</li>
</ol>
<ul>
<li><p>Develop a prototype network to a high level of production fidelity, using production-grade infrastructure, and developed it to a bank’s production standard– essentially a production-ready prototype network.</p></li>
<li><p>Develop a technical architecture that is flexible, where services and roles are unbundled and modularised.</p></li>
<li><p>Develop a payments model that is applicable in a domestic context, and which could be extended as a reference for international multi-country, multicurrency settlement.</p></li>
</ul>
<ol start="2" type="1">
<li>Use-cases Development:</li>
</ol>
<ul>
<li><p>Understand use cases with clear and immediate business needs such as transacting in multiple currencies, and settlement of securities and other assets.</p></li>
<li><p>Explore new and emerging use cases, particularly blockchain applications that are live or going live.</p></li>
</ul>
<ol start="3" type="1">
<li>Connectivity and Integration Testing:</li>
</ol>
<ul>
<li><p>Develop additional functionalities and connectivity interfaces to support integration with use cases.</p></li>
<li><p>Conduct integration testing with selected use cases to refine functional and connectivity specifications.</p></li>
<li><p>Release and publish specifications under open-source license.</p></li>
</ul>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2069395536.png" class="img-fluid figure-img"></p>
<figcaption>Fig 5.1: Ubin Connectivity Interface (Monetary Authority of Singapore, 2021).</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-3733300207.png" class="img-fluid figure-img"></p>
<figcaption>Fig 5.2: Technical Architecture Diagram (Monetary Authority of Singapore, 2021).</figcaption>
</figure>
</div>
</section>
<section id="phase-5-commercial-use-cases" class="level2">
<h2 class="anchored" data-anchor-id="phase-5-commercial-use-cases">6.4 Phase 5 commercial use cases</h2>
<section id="case-study-1---private-securities-exchange" class="level3">
<h3 class="anchored" data-anchor-id="case-study-1---private-securities-exchange">Case Study 1 - Private securities exchange</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-3213318520.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Case study 1 showcases how a private securities exchange can use the functionality offered by the Ubin payments network to enable the atomic DvP of private securities and corresponding payments between buyers and sellers. 1exchange, which was granted its Recognised Market Operator licence by MAS in December 2018, is the country’s first regulated stock exchange for the trading of Singaporean private companies’ securities. Investors who trade in private securities listed on the platform will have digital representations of their shareholdings created and registered via smart contracts on a public blockchain network.</p>
</section>
<section id="case-study-2---tokenised-bonds-and-payments" class="level3">
<h3 class="anchored" data-anchor-id="case-study-2---tokenised-bonds-and-payments">Case Study 2 - Tokenised bonds and payments</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-3268936393.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Case Study 2 demonstrates how the functionality offered by the Ubin payments network could be used to enable the atomic DvP of tokenised bonds and payments. STACS has developed a securities trading asset clearing and settlement platform based on blockchain technology, which financial institutions can use for the issuance and lifecycle management of digital securities. Specifically, this case study models the origination of a bond on the platform, whereby an investment bank can issue bonds on behalf of a company on the platform and can accept payment of funds from the Ubin payments network. Investors would refer to other banks looking to purchase bonds on behalf of their clients, using funds in the Ubin payments network.</p>
</section>
<section id="case-study-3---cross-border-settlement-of-digital-securities-and-dividends" class="level3">
<h3 class="anchored" data-anchor-id="case-study-3---cross-border-settlement-of-digital-securities-and-dividends">Case Study 3 - Cross border settlement of digital securities and dividends</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2890731440.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Sygnum Bank AG (Sygnum) has provided two case studies that could be involved in the Ubin payments network. These are cross-border settlement of a digital security transaction in the primary market, and cross-border dividend payment using digital currencies. Integrating with the Ubin payments network will bring quicker settlement of digital securities, as clearing is conducted real-time on-chain.</p>
<p>Moreover, the conditional payment functionality on the Ubin payments network will allow dividend payments to be released based on certain conditions such as time or percentage of shareholding, thereby reducing manual processes while increasing the speed of payment.</p>
</section>
<section id="case-study-4---trade-document-exchange-and-payments-processing" class="level3">
<h3 class="anchored" data-anchor-id="case-study-4---trade-document-exchange-and-payments-processing">Case Study 4 - Trade document exchange and payments processing</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2736075388.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Digital Ventures, a subsidiary of Siam Commercial Bank, has developed a platform called Blockchain for Procure-to-Pay (B2P) to enable trade document exchanges with automated document verification and payment processing. This platform improves process efficiency and delivers cost savings to buyers; it also provides sellers with easier and faster access to supply chain financing.</p>
<p>The B2P platform was integrated with the Ubin payments network to facilitate supply chain trading and financing. Buyers, sellers and banks exchange trade documents over the platform, with payments settled through the Ubin payments network. This integration shows the potential for achieving more efficient means of cross border, single-currency settlement.</p>
</section>
<section id="case-study-5---supply-chain-finance" class="level3">
<h3 class="anchored" data-anchor-id="case-study-5---supply-chain-finance">Case Study 5 - Supply Chain finance</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-1533475599.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Case study 5 explores how the Ubin conditional payment functionality may be used by Crediti, a Singapore-headquartered blockchain-enabled trade credit and supply chain financing platform that engages non-bank institutional capital as an alternative source of funding to SMEs seeking finance.</p>
<p>Every exposure is tokenised and recorded in an immutable registry, which prevents ownership title documents such as bills of lading and invoices from being financed by multiple lenders on the platform.</p>
<p>In this case study, it is assumed that a seller requests financing on the platform by transferring the bill of lading, which serves as a document of title to a commoditised product, to the lender.</p>
</section>
<section id="case-study-6---healthcare-claims" class="level3">
<h3 class="anchored" data-anchor-id="case-study-6---healthcare-claims">Case Study 6 - Healthcare claims</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-3558509744.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Digital Asset helps enterprises design, create, and run the next generation of distributed ledger applications using Digital Asset Modelling Language (DAML), an intuitive, open-source, smart contract programming language. The firm has developed a prototype for a proposed healthcare claims application, which is modelled on the lifecycle of a hospitalisation claim in Singapore involving a patient, a hospital, a private insurer and a national health insurer.</p>
<p>The interactions between the parties are tracked as ledger events and governed by DAML smart contracts. The application integrates with the Ubin payments network for balance enquiries and the transfer of payments.</p>
</section>
<section id="case-study-7---payments-for-programmatic-advertising" class="level3">
<h3 class="anchored" data-anchor-id="case-study-7---payments-for-programmatic-advertising">Case Study 7 - Payments for programmatic Advertising</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-2313275786.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Aqilliz has developed a product, Proton, which leverages on the Zilliqa platform to streamline the digital supply chain of programmatic advertising by connecting multiple parties on a single platform. This network could be integrated with the Ubin payments network to better facilitate the payment process.</p>
<p>The current model looks at the net settlement via the Ubin payments network. However, if the Ubin payments network supports cheap and fast micropayments, the amount payable may be automatically calculated and payment be made directly via the Ubin payments network.</p>
</section>
<section id="case-study-8---salary-payments" class="level3">
<h3 class="anchored" data-anchor-id="case-study-8---salary-payments">Case Study 8 - Salary payments</h3>
<div class="quarto-figure quarto-figure-left">
<figure class="figure">
<p><img src="images/clipboard-1185795566.png" class="img-fluid quarto-figure quarto-figure-left figure-img"></p>
</figure>
</div>
<p>Octomate provides a blockchain-based HR payments solution that allows real-time, accurate salary payments for gig workers and organisations upon work completion. In Adecco’s case, workers and companies can view and track work done on a front-end application. Once the gig workers complete their assignments, the payments are released automatically. To ensure completeness in the process, these platforms can be integrated with bank payment platforms to allow for seamless transactions and the release of payments.</p>
<p>When a worker is legally employed with Adecco to work for its clients, assignment details such as scope of work, hours worked and salary payable are agreed prior to commencement of work.</p>
<p>These pre-defined agreements are recorded on Octomate’s platform, with smart contracts created to govern the conditions for payment. Upon fulfilment of work with pre-defined conditions met, such as verification of a timesheet by a manager, payment is automatically triggered to the gig worker. This further streamlines Adecco’s payment process to achieve speed and efficiency, allowing workers to receive pay faster.</p>
</section>
</section>
<section id="key-insights" class="level2">
<h2 class="anchored" data-anchor-id="key-insights">6.5 Key Insights</h2>
<p>The success of Phase 5 highlighted the potential for blockchain technology to revolutionize domestic and cross-border payments and settlements. The prototype demonstrated that blockchain can enable faster, cheaper, and more secure transactions, with the ability to transact in multiple currencies. Additionally, the collaboration between MAS and financial institutions showed that the development of blockchain solutions requires a collaborative approach. The partnership between the public and private sectors was crucial to the success of the project.</p>
<section id="lessons-learnt" class="level3">
<h3 class="anchored" data-anchor-id="lessons-learnt">Lessons Learnt</h3>
<p>The development of Phase 5: Ubin V Payment Network has provided several important lessons for the financial industry and for the development of blockchain-based solutions in general. Some of the key lessons learned from the Ubin V Payment Network include:</p>
<ol type="1">
<li><p><u>Collaboration is essential</u>: The success of the Ubin V Payment Network prototype demonstrates the importance of collaboration between financial institutions, regulators, and technology providers. The collaboration between MAS, J.P. Morgan, and Temasek was critical to the development of the network and highlights the importance of bringing together diverse expertise and resources.</p></li>
<li><p><u>Blockchain can improve efficiency and reduce costs</u>: The Ubin V Payment Network prototype has demonstrated the potential for blockchain to improve efficiency and reduce the costs of cross-border payments and settlements. By automating payment and settlement processes and providing real-time gross settlement and atomic delivery-versus-payment settlement, the network reduces the need for intermediaries and reduces the cost and risk of cross-border transactions.</p></li>
<li><p><u>Interoperability is key</u>: The Ubin V Payment Network prototype was designed to facilitate cross-border payments and settlements between different currencies. Interoperability between different blockchain networks and traditional financial systems will be essential to enable seamless cross-border transactions and facilitate the adoption of blockchain-based solutions.</p></li>
<li><p><u>Regulation is important</u>: The development of blockchain-based solutions for the financial industry will require a supportive regulatory environment. MAS has played an important role in providing regulatory clarity and support for the development of the Ubin V Payment Network prototype, and this will be critical for the broader adoption of blockchain-based solutions in the financial industry.</p></li>
</ol>
</section>
</section>
</section>
<section id="way-ahead" class="level1">
<h1>7. Way Ahead</h1>
<p>The success of Project Ubin has paved the way for further exploration and development of blockchain-based solutions for cross-border payments and settlements. Future projects could focus on the integration of blockchain technology with other emerging technologies, such as artificial intelligence and the Internet of Things, to enable even greater innovation in this space.</p>
<p><u><strong>Key Success Factors</strong></u><strong>:</strong></p>
<ol type="1">
<li><p><u>Collaborative approach</u>: The success of Project Ubin can be attributed to the collaborative approach between MAS and financial institutions. The collaboration enabled the development of a robust and efficient payment network prototype that addressed the challenges of cross-border payments and settlements.</p></li>
<li><p><u>Agile methodology</u>: Project Ubin utilized an agile methodology that enabled development teams to iterate quickly and adjust to changing requirements. This approach ensured that the prototype was developed efficiently and effectively.</p></li>
<li><p><u>Focus on use cases</u>: Project Ubin was focused on specific use cases in each phase, such as cross-border payments and settlements. This enabled development teams to develop prototypes that addressed the specific challenges and requirements of these use cases.</p></li>
<li><p><u>Technological expertise</u>: The team involved in Project Ubin had a high level of expertise in blockchain and DLT, which proved critical to the success of the project.</p></li>
</ol>
<p><u><strong>Critical Challenges</strong></u><strong>:</strong></p>
<ol type="1">
<li><p><u>Regulatory challenges</u>: The development of a blockchain-based payment network required the collaboration of different regulatory bodies, which can be a time-consuming and challenging process.</p></li>
<li><p><u>Security concerns</u>: The development of any payment network involves significant security concerns. Ensuring the security of the payment network is critical to its success, and any security breaches could significantly undermine confidence in the network.</p></li>
<li><p><u>Adoption by financial institutions</u>: The success of Project Ubin will depend on the adoption of the payment network by financial institutions. Convincing financial institutions to adopt new technologies can be a challenge, particularly if they already have existing payment networks that are functioning well.</p></li>
<li><p>I<u>nteroperability</u>: A significant challenge is ensuring interoperability with existing payment networks and systems. Ensuring that the new payment network can communicate and transact with existing networks is critical to its success.</p></li>
</ol>
<p>While Project Ubin has been a successful initiative in driving innovation and collaboration in the blockchain and distributed ledger technology (DLT) space, MAS has continued to explore new initiatives namely Project Ubin+.</p>
<p>On Apr 21 2021, DBS, J.P. Morgan, and Temasek announced plans to develop an open industry platform Partior to reimagine and accelerate value movements for payments, trade, and foreign exchange settlement in a new digital era, through a newly-established technology company. Partior builds on the work done under Project Ubin and aims to commercialize the technology developed by MAS and its partners. In particular, Partior leverages the experience gained from Project Ubin’s final phase, which focused on the development of a multi-currency payments network using blockchain technology.</p>
</section>
<section id="conclusion" class="level1">
<h1>7. Conclusion</h1>
<p>Over the five phases of Project Ubin, MAS has collaborated with a range of industry partners, including banks, financial institutions, and technology providers, to explore different use cases for blockchain and DLT. These use cases (see Annex E, uses cases 1-8) have included the development of a prototype for a digital multi-currency payments network, the creation of a bond issuance and servicing platform, and the testing of a blockchain-based platform for the settlement of securities.</p>
<p>One of the key successes of Project Ubin has been its ability to generate interest and momentum in the blockchain and DLT space, both within Singapore and globally. The project has helped to position Singapore as a leading centre for blockchain and DLT innovation and has encouraged other regulators and industry players to explore the potential of these technologies. Another success of Project Ubin has been its ability to foster collaboration between different industry players, including regulators, banks, and technology providers. The collaborative approach taken by MAS has helped to build trust and understanding between different stakeholders and has facilitated the development of innovative solutions that would not have been possible through individual efforts.</p>
<p>In summary, Project Ubin has been considered a &nbsp;largely successful initiative that has helped to drive innovation and collaboration in the blockchain and DLT space. However, it is important to note that Project Ubin is an ongoing initiative, and the full impact of the project may not be realized for several years. While the project has demonstrated the potential for blockchain and DLT to transform the financial industry, there are still challenges to be addressed, including issues around interoperability, scalability, and regulatory clarity.</p>
</section>
<section id="references" class="level1">
<h1>8. References</h1>
<p>Project Ubin: Central Bank Digital Money using Distributed Ledger Technology. (n.d.-b). <a href="https://www.mas.gov.sg/schemes-and-initiatives/Project-Ubin" class="uri">https://www.mas.gov.sg/schemes-and-initiatives/Project-Ubin</a></p>
<p>BIS. (2017, September 17). What is distributed ledger technology? BIS Quarterly Review. <a href="https://www.bis.org/publ/qtrpdf/r_qt1709y.htm" class="uri">https://www.bis.org/publ/qtrpdf/r_qt1709y.htm</a></p>
<p>Central Banks of Canada and Singapore conduct successful experiment for cross-border payments using Distributed Ledger Technology. (n.d.). <a href="https://www.mas.gov.sg/news/media-releases/2019/central-banks-of-canada-and-singapore-conduct-successful-experiment-for-cross-border-payments" class="uri">https://www.mas.gov.sg/news/media-releases/2019/central-banks-of-canada-and-singapore-conduct-successful-experiment-for-cross-border-payments</a></p>
<p>Bech, M. L. (2020, March 1). On the future of securities settlement. <a href="https://www.bis.org/publ/qtrpdf/r_qt2003i.htm" class="uri">https://www.bis.org/publ/qtrpdf/r_qt2003i.htm</a></p>
<p>Real-time gross settlement systems. (1997, March 5).</p>
<p><a href="https://www.bis.org/cpmi/publ/d22.htm" class="uri">https://www.bis.org/cpmi/publ/d22.htm</a></p>
<p>Oracle ® FLEXCUBE Universal Banking Foreign Exchange User Guide. (n.d.). <a href="https://docs.oracle.com/cd/E74659_01/html/FX/FX07_CLS.htm#:~:text=Continuous%20Linked%20Settlement%20(CLS)%20is,values%20through%20CLS%20Bank%20International" class="uri">https://docs.oracle.com/cd/E74659_01/html/FX/FX07_CLS.htm#:~:text=Continuous%20Linked%20Settlement%20(CLS)%20is,values%20through%20CLS%20Bank%20International</a>.</p>
<p><em>SWIFT gpi | Swift</em>. (n.d.). Swift. <a href="https://www.swift.com/our-solutions/swift-gpi" class="uri">https://www.swift.com/our-solutions/swift-gpi</a></p>
<p>Extending and aligning payment system operating hours for cross-border payments. (2022, May 12). <a href="https://www.bis.org/cpmi/publ/d203.htm" class="uri">https://www.bis.org/cpmi/publ/d203.htm</a></p>
<p>Extending and aligning payment system operating hours for cross-border payments. (2022, May 12). <a href="https://www.bis.org/cpmi/publ/d203.htm" class="uri">https://www.bis.org/cpmi/publ/d203.htm</a></p>
<p>The Bank of Canada, Bank of England and Monetary Authority of Singapore share assessment on emerging opportunities for digital transformation in cross-border payments. (n.d.). <a href="https://www.mas.gov.sg/news/media-releases/2018/assessment-on-emerging-opportunities-for-digital-transformation-in-cross-border-payments" class="uri">https://www.mas.gov.sg/news/media-releases/2018/assessment-on-emerging-opportunities-for-digital-transformation-in-cross-border-payments</a></p>


</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>