<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.555">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Imran Ibrahim">
<meta name="dcterms.date" content="2024-08-04">

<title>Imran’s Postgrad repo - DataVis Makeover of another student’s work</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="../../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>

<script src="../../site_libs/plotly-binding-4.10.4/plotly.js"></script>

<script src="../../site_libs/typedarray-0.1/typedarray.min.js"></script>

<script src="../../site_libs/jquery-3.5.1/jquery.min.js"></script>

<link href="../../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">

<script src="../../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>

<link href="../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">

<script src="../../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>



<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Imran’s Postgrad repo</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-exercises-in-r" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Exercises in R</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-exercises-in-r">    
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex1/R_Ex1.html">
 <span class="dropdown-text">R Exercise 1 - Analysing PISA’s education survey data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex2/R_Ex2.html">
 <span class="dropdown-text">R Exercise 2 - 5 Exploratory Data Analyses on Pisa Data</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex3/R_Ex3.html">
 <span class="dropdown-text">R Exercise 3 - DataVis Makeover of another student’s work</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex4/R_Ex4.html">
 <span class="dropdown-text">R Exercise 4 - Be Weatherwise or Otherwise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex5/R_Ex5.html">
 <span class="dropdown-text">R Exercise 5 - Visual Analytics exercise on Armed conflicts - Initial Draft</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex6/R_Ex6.html">
 <span class="dropdown-text">R Exercise 6 - Geospatial Analysis1 - Local Measures of Spatial Autocorrelation</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex7/R_Ex7.html">
 <span class="dropdown-text">R Exercise 7 - Geospatial Analysis2 - Emerging Hot Spot Analysis</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex8/R_Ex8.html">
 <span class="dropdown-text">R Exercise 8 - Geospatial Analysis3 - Spatially Constrained Clustering-ClustGeo method</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../R-ex/R-Ex9/R_Ex9.html">
 <span class="dropdown-text">Group Project Poster - Decoding Chaos - Analysing Armed conflicts in Myammar</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-exercises-in-python" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Exercises in Python</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-exercises-in-python">    
        <li>
    <a class="dropdown-item" href="../../Python-ex/Python-Ex1/Python_Ex1.html">
 <span class="dropdown-text">Python Exercise 1 - Automate the design of a 3-stocks portfolio for a given target return</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Python-ex/Python-Ex2/Python_Ex2.html">
 <span class="dropdown-text">Python Exercise 2 - Designing a 3-stock portfolio for a robo-advisor</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Python-ex/Python-Ex3/Python_Ex3.html">
 <span class="dropdown-text">Python Exercise 3 - Project - Predicting Stock Prices through Time series Analysis</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-sas-viya-exercises" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">SAS Viya Exercises</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-sas-viya-exercises">    
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex1/Write_Ex1.html">
 <span class="dropdown-text">Assignment 1 - Show me the numbers</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex2/Write_Ex2.html">
 <span class="dropdown-text">Assignment 2 - Be Customer wise or otherwise</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex3/Write_Ex3.html">
 <span class="dropdown-text">Project - Loan Default prediction</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Write-ex/Write-Ex4/Write_Ex4.html">
 <span class="dropdown-text">Project Poster - Loan Default prediction</span></a>
  </li>  
    </ul>
  </li>
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-written-assignments-(fintech" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Written Assignments (Fintech)</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-written-assignments-(fintech">    
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex1/Article_Ex1.html">
 <span class="dropdown-text">Assignment 1 - Factors that contributed to the rise of Fintech companies</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex2/Article_Ex2.html">
 <span class="dropdown-text">Assignment 2 - Banks have changed the way they deploy technology</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex3/Article_Ex3.html">
 <span class="dropdown-text">Assignment 3 - Assess and discuss how the role of financial regulators has evolved</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex4/Article_Ex4.html">
 <span class="dropdown-text">Assignment 4 - Key characteristics that create or inject value for a non-fungible token</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex5/Article_Ex5.html">
 <span class="dropdown-text">Assignment 5 - Bitcoin - Examining a Layer 1 &amp; 2 solution and adoption for a payment use case</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex6/Article_Ex6.html">
 <span class="dropdown-text">Assignment 6 - Decentralised Finance - Examine the working principles and Appraise the future of DEFI</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex7/Article_Ex7.html">
 <span class="dropdown-text">Assignment 7</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="../../Article-ex/Article-Ex8/Article_Ex8.html">
 <span class="dropdown-text">Assignment 8</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools tools-wide">
    <a href="../../about.html" title="About Imran" class="quarto-navigation-tool px-1" aria-label="About Imran"><i class="bi bi-house-heart"></i></a>
    <a href="https://github.com/imranmi/imran-s-data-sc" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
    <a href="https://www.linkedin.com/in/imran-ibrahim-116a236b" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-linkedin"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#the-task" id="toc-the-task" class="nav-link active" data-scroll-target="#the-task">1. The Task</a></li>
  <li><a href="#data-preparation" id="toc-data-preparation" class="nav-link" data-scroll-target="#data-preparation">2. Data Preparation</a>
  <ul class="collapse">
  <li><a href="#loading-r-packages" id="toc-loading-r-packages" class="nav-link" data-scroll-target="#loading-r-packages">2.1 Loading R packages</a></li>
  <li><a href="#importing-the-data-set" id="toc-importing-the-data-set" class="nav-link" data-scroll-target="#importing-the-data-set">2.2 Importing the Data set</a></li>
  <li><a href="#removing-missing-values-and-converting-data-types" id="toc-removing-missing-values-and-converting-data-types" class="nav-link" data-scroll-target="#removing-missing-values-and-converting-data-types">2.3 Removing missing values and Converting data types</a></li>
  <li><a href="#binning-variable-escs" id="toc-binning-variable-escs" class="nav-link" data-scroll-target="#binning-variable-escs">2.4 Binning Variable ESCS</a></li>
  <li><a href="#recoding-st004d01t-gender-variable" id="toc-recoding-st004d01t-gender-variable" class="nav-link" data-scroll-target="#recoding-st004d01t-gender-variable">2.5 Recoding ST004D01T (Gender) variable</a></li>
  </ul></li>
  <li><a href="#visualization-critique-and-remake" id="toc-visualization-critique-and-remake" class="nav-link" data-scroll-target="#visualization-critique-and-remake">3. Visualization Critique and Remake</a>
  <ul class="collapse">
  <li><a href="#general-distribution-of-students-performance-in-math-science-and-reading" id="toc-general-distribution-of-students-performance-in-math-science-and-reading" class="nav-link" data-scroll-target="#general-distribution-of-students-performance-in-math-science-and-reading">3.1 General distribution of students’ performance in Math, Science and Reading</a>
  <ul class="collapse">
  <li><a href="#evaluation" id="toc-evaluation" class="nav-link" data-scroll-target="#evaluation">3.1.1 Evaluation</a></li>
  <li><a href="#sketch-of-proposed-design" id="toc-sketch-of-proposed-design" class="nav-link" data-scroll-target="#sketch-of-proposed-design">3.1.2 Sketch of Proposed Design</a></li>
  <li><a href="#remake" id="toc-remake" class="nav-link" data-scroll-target="#remake">3.1.3 Remake</a></li>
  </ul></li>
  <li><a href="#distribution-of-students-performance-in-math-science-and-reading-across-schools" id="toc-distribution-of-students-performance-in-math-science-and-reading-across-schools" class="nav-link" data-scroll-target="#distribution-of-students-performance-in-math-science-and-reading-across-schools">3.2 Distribution of students’ performance in Math, Science and Reading across schools</a>
  <ul class="collapse">
  <li><a href="#evaluation-1" id="toc-evaluation-1" class="nav-link" data-scroll-target="#evaluation-1">3.2.1 Evaluation</a></li>
  <li><a href="#sketch-of-proposed-design-1" id="toc-sketch-of-proposed-design-1" class="nav-link" data-scroll-target="#sketch-of-proposed-design-1">3.2.2 Sketch of Proposed Design</a></li>
  <li><a href="#remake-1" id="toc-remake-1" class="nav-link" data-scroll-target="#remake-1">3.2.3 Remake</a></li>
  </ul></li>
  <li><a href="#distribution-of-students-performance-in-math-science-and-reading-by-gender" id="toc-distribution-of-students-performance-in-math-science-and-reading-by-gender" class="nav-link" data-scroll-target="#distribution-of-students-performance-in-math-science-and-reading-by-gender">3.3 Distribution of students’ performance in Math, Science and Reading by gender</a>
  <ul class="collapse">
  <li><a href="#evaluation-2" id="toc-evaluation-2" class="nav-link" data-scroll-target="#evaluation-2">3.3.1 Evaluation</a></li>
  <li><a href="#sketch-of-proposed-design-2" id="toc-sketch-of-proposed-design-2" class="nav-link" data-scroll-target="#sketch-of-proposed-design-2">3.3.2 Sketch of Proposed Design</a></li>
  <li><a href="#remake-2" id="toc-remake-2" class="nav-link" data-scroll-target="#remake-2">3.3.3 Remake</a></li>
  </ul></li>
  <li><a href="#distribution-of-math-reading-and-science-scores-by-socioeconomic-status" id="toc-distribution-of-math-reading-and-science-scores-by-socioeconomic-status" class="nav-link" data-scroll-target="#distribution-of-math-reading-and-science-scores-by-socioeconomic-status">3.4 Distribution of Math, Reading and Science scores by socioeconomic status</a>
  <ul class="collapse">
  <li><a href="#evaluation-3" id="toc-evaluation-3" class="nav-link" data-scroll-target="#evaluation-3">3.4.1 Evaluation</a></li>
  <li><a href="#sketch-of-proposed-design-3" id="toc-sketch-of-proposed-design-3" class="nav-link" data-scroll-target="#sketch-of-proposed-design-3">3.4.2 Sketch of Proposed Design</a></li>
  <li><a href="#remake-3" id="toc-remake-3" class="nav-link" data-scroll-target="#remake-3">3.4.4 Remake</a></li>
  </ul></li>
  <li><a href="#distribution-of-students-performance-in-math-science-and-reading-by-gender-across-schools" id="toc-distribution-of-students-performance-in-math-science-and-reading-by-gender-across-schools" class="nav-link" data-scroll-target="#distribution-of-students-performance-in-math-science-and-reading-by-gender-across-schools">3.5 Distribution of students’ performance in Math, Science and Reading by gender across schools</a>
  <ul class="collapse">
  <li><a href="#evaluation-4" id="toc-evaluation-4" class="nav-link" data-scroll-target="#evaluation-4">3.5.1 Evaluation</a></li>
  <li><a href="#sketch-of-proposed-design-4" id="toc-sketch-of-proposed-design-4" class="nav-link" data-scroll-target="#sketch-of-proposed-design-4">3.5.2 Sketch of Proposed Design</a></li>
  <li><a href="#remake-4" id="toc-remake-4" class="nav-link" data-scroll-target="#remake-4">3.5.3 Remake</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#learning-points" id="toc-learning-points" class="nav-link" data-scroll-target="#learning-points">4. Learning Points</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Take-Home Exercise 1c : DataVis Makeover of another student’s work</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Imran Ibrahim </p>
          </div>
  </div>
    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 4, 2024</p>
    </div>
  </div>
  
    <div>
    <div class="quarto-title-meta-heading">Modified</div>
    <div class="quarto-title-meta-contents">
      <p class="date-modified">August 11, 2024</p>
    </div>
  </div>
    
  </div>
  


</header>


<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
DataVis Makeover
</div>
</div>
<div class="callout-body-container callout-body">
<p>Remaking a peer’s original design by improving the clarity and aesthetics of charts by creating an alternative design.</p>
</div>
</div>
<section id="the-task" class="level1">
<h1>1. The Task</h1>
<p>In this take-home exercise, we are required to:</p>
<ul>
<li><p>select one of the Take-home Exercise 1 prepared by our classmates,</p></li>
<li><p>critique the submission in terms of clarity and aesthetics,</p></li>
<li><p>prepare a sketch for the alternative design by using the data visualization design principles and best practices we have learned in Lesson 1 and 2, and</p></li>
<li><p>remake the original design by using ggplot2, ggplot2 extensions and tidyverse packages.</p></li>
</ul>
</section>
<section id="data-preparation" class="level1">
<h1>2. Data Preparation</h1>
<p>I will follow the data preparation steps done by the original author of the selector graphs. The steps are listed below for easy reference. As this is not the focus of the exercise, I will not go into the minute details of preparation.</p>
<section id="loading-r-packages" class="level2">
<h2 class="anchored" data-anchor-id="loading-r-packages">2.1 Loading R packages</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(tidyverse, haven, ggrepel, ggthemes, hrbrthemes, patchwork, intsvy, ggdist, ggridges,colorspace, plotly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="importing-the-data-set" class="level2">
<h2 class="anchored" data-anchor-id="importing-the-data-set">2.2 Importing the Data set</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>stu_qqq_SG <span class="ot">&lt;-</span> </span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_rds</span>(<span class="st">"data/stu_qqq_SG.rds"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="removing-missing-values-and-converting-data-types" class="level2">
<h2 class="anchored" data-anchor-id="removing-missing-values-and-converting-data-types">2.3 Removing missing values and Converting data types</h2>
<p>Rows with missing values for ESCS were removed before further analysis.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>stu_qqq_SG_clean <span class="ot">&lt;-</span> stu_qqq_SG[<span class="fu">complete.cases</span>(stu_qqq_SG[, <span class="st">"ESCS"</span>]), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>CNTSCHID and CNTSTUID’s data types were changed to character.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>stu_qqq_SG_clean<span class="sc">$</span>CNTSCHID <span class="ot">&lt;-</span> <span class="fu">as.character</span>(stu_qqq_SG_clean<span class="sc">$</span>CNTSCHID)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>stu_qqq_SG_clean<span class="sc">$</span>CNTSTUID <span class="ot">&lt;-</span> <span class="fu">as.character</span>(stu_qqq_SG_clean<span class="sc">$</span>CNTSTUID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="binning-variable-escs" class="level2">
<h2 class="anchored" data-anchor-id="binning-variable-escs">2.4 Binning Variable ESCS</h2>
<p>The ESCS variable was binned into quantiles using the&nbsp;<a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate()</a>&nbsp;and&nbsp;<a href="https://www.rdocumentation.org/packages/base/versions/3.6.2/topics/cut">cut()</a>&nbsp;function</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>stu_qqq_SG_clean <span class="ot">&lt;-</span> stu_qqq_SG_clean <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ESCS_recoded =</span> <span class="fu">cut</span>(ESCS,<span class="at">breaks=</span><span class="fu">quantile</span>(ESCS,<span class="fu">c</span>(<span class="dv">0</span>,<span class="fl">0.25</span>,<span class="fl">0.5</span>,<span class="fl">0.75</span>,<span class="dv">1</span>)),<span class="at">labels=</span><span class="fu">c</span>(<span class="st">"Very Low"</span>,<span class="st">"Low"</span>,<span class="st">"Medium"</span>,<span class="st">"High"</span>),<span class="at">include.lowest=</span><span class="cn">TRUE</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="recoding-st004d01t-gender-variable" class="level2">
<h2 class="anchored" data-anchor-id="recoding-st004d01t-gender-variable">2.5 Recoding ST004D01T (Gender) variable</h2>
<p>Variable ST004D01T, was recoded to labels to “Female” and “Male” respectively.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>stu_qqq_SG_clean<span class="sc">$</span>ST004D01T <span class="ot">&lt;-</span> <span class="fu">recode</span>(stu_qqq_SG_clean<span class="sc">$</span>ST004D01T, <span class="st">"1"</span> <span class="ot">=</span> <span class="st">"Female"</span>, <span class="st">"2"</span> <span class="ot">=</span> <span class="st">"Male"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="visualization-critique-and-remake" class="level1 page-columns page-full">
<h1>3. Visualization Critique and Remake</h1>
<p>The graphs created by the author will be evaluated and improvements in terms of clarity and aesthetics will be applied in the makeover.</p>
<section id="general-distribution-of-students-performance-in-math-science-and-reading" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="general-distribution-of-students-performance-in-math-science-and-reading">3.1 General distribution of students’ performance in Math, Science and Reading</h2>
<p>First, the author had created a data folder path to save any data files generated:</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data_folder_path <span class="ot">&lt;-</span> <span class="fu">file.path</span>(<span class="fu">getwd</span>(), <span class="st">"data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>The code below uses the <code>instvy package</code> to extract the composite Means and Standard Deviations of PV values across the population of students that took the assessment.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pvmathgeneral <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"MATH"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvmath_general"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>pvmathgeneral<span class="sc">$</span>subject <span class="ot">&lt;-</span> <span class="st">"Math"</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>pvreadgeneral <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"READ"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvread_general"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>pvreadgeneral<span class="sc">$</span>subject <span class="ot">&lt;-</span> <span class="st">"Reading"</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>pvsciegeneral <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"SCIE"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvscie_general"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>pvsciegeneral<span class="sc">$</span>subject <span class="ot">&lt;-</span> <span class="st">"Science"</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>mergedgeneral <span class="ot">&lt;-</span> <span class="fu">rbind</span>(pvmathgeneral,pvreadgeneral,pvsciegeneral)</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>mergedgeneral <span class="sc">%&gt;%</span> <span class="fu">relocate</span>(subject)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  subject Freq   Mean s.e.     SD  s.e
1    Math 6559 575.27 1.26 102.68 0.93
2 Reading 6559 543.25 1.91 105.73 1.16
3 Science 6559 561.97 1.33  99.02 1.10</code></pre>
</div>
</div>
<p>A plot to show the general distribution of Math, Reading and Science scores was generated using the code below.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true">The original plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">The code</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p><img src="images/clipboard-3818993272.png" class="img-fluid"></p>
<p>The author had created a series of error bars across the 3 subjects to represent the distribution of Student scores across the 3 subjects.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>p1<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(mergedgeneral, <span class="fu">aes</span>(<span class="at">x =</span> subject, <span class="at">y =</span> Mean,<span class="at">colour=</span>subject)) <span class="sc">+</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>),<span class="at">lwd=</span><span class="fl">0.5</span>,<span class="at">show.legend=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> mean,</span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">18</span>,</span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">5</span>,</span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">colour=</span>subject),</span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb10-10"><a href="#cb10-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb10-11"><a href="#cb10-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD),</span>
<span id="cb10-12"><a href="#cb10-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.5</span>,</span>
<span id="cb10-13"><a href="#cb10-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="fl">0.8</span>,</span>
<span id="cb10-14"><a href="#cb10-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>)</span>
<span id="cb10-15"><a href="#cb10-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb10-16"><a href="#cb10-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Scores across Math, Reading and Science across all 15-year olds who took PISA 2022 in SGP"</span>) <span class="sc">+</span></span>
<span id="cb10-17"><a href="#cb10-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Scores"</span>) <span class="sc">+</span></span>
<span id="cb10-18"><a href="#cb10-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Subject"</span>)<span class="sc">+</span></span>
<span id="cb10-19"><a href="#cb10-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">50</span>))<span class="sc">+</span></span>
<span id="cb10-20"><a href="#cb10-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb10-21"><a href="#cb10-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size =</span> <span class="dv">12</span>)</span>
<span id="cb10-22"><a href="#cb10-22" aria-hidden="true" tabindex="-1"></a>p1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="evaluation" class="level3">
<h3 class="anchored" data-anchor-id="evaluation">3.1.1 Evaluation</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 40%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th>Assessment Criteria</th>
<th>Critique/Feedback</th>
<th>Possible Improvements</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Clarity</strong></td>
<td><ol type="1">
<li><p>Although the original plot enables me to visualize the differences in scores across subjects, I am unclear as to which score this is showing. Is it PV1 or average of the PV values?</p></li>
<li><p>Graph is titled as “Scores across Math, Reading and Science”, however the code indicates that mean scores +/- one standard deviation were generated instead.</p></li>
<li><p>The data subset used for this plot only has 3 observations and 6 variables. Upon inspecting the data set, it is actually the composite mean score for each subject for the entire student cohort.</p></li>
</ol></td>
<td><ol type="1">
<li>The code and subset used is not suitable to plot a&nbsp;<strong>Distribution</strong>&nbsp;of student scores across subjects. I will extract a new subset with all PV1 scores at the individual student level. This will then be used to plot the distribution of student scores for the different subjects.</li>
</ol></td>
</tr>
<tr class="even">
<td><strong>Aesthetics</strong></td>
<td><ol type="1">
<li><p>There is already a legend on the right which identifies subjects by colour, thus making the Y axis labels seem redundant.</p></li>
<li><p>The scale for the X-axis is from 0 to 1000, in increments of 50. Because of the “shortness” of the error bars, the graph appears too elongated. This contributes to “extra” space and additional non-data ink.</p></li>
<li><p>Unable to decipher the actual scores even with the X-axis tick marks.</p></li>
<li><p>Since the subjects are clearly labelled in the Y axis, the label “Subject” can be removed, to minimize non-data ink.</p></li>
</ol></td>
<td><ol type="1">
<li><p>To remove the legend or Y-Axis labels, to reduce non-data ink.</p></li>
<li><p>Shorten the X-axis, or extract new data points to populate the correct range of scores.</p></li>
<li><p>To annotate the mean scores onto the plot, so that we can remove the background grid lines and X-axis tick marks and reduce non-data ink.</p></li>
<li><p>To remove the label “Subject”, since it does not provide additional information to readers.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Observation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Upon closer examination of the code used, the author had included an error bar with Mean +/- one standard deviation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">#geom_errorbar(</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#aes(ymin = Mean - SD, ymax = Mean + SD),</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#width = 0.5,</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">#size=0.8,</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#position = position_dodge(width = 0.5)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>I would conclude that this plot is actually comparing the mean subject scores across subjects.</p>
</div>
</div>
<p>Examining the subset used for the original plot in more detail.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(mergedgeneral)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  Freq   Mean s.e.     SD  s.e subject
1 6559 575.27 1.26 102.68 0.93    Math
2 6559 543.25 1.91 105.73 1.16 Reading
3 6559 561.97 1.33  99.02 1.10 Science</code></pre>
</div>
</div>
<p>The <em>mergedgeneral</em> subset table only has 3 observations and 6 variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conclusion
</div>
</div>
<div class="callout-body-container callout-body">
<p>The code and data subset used by the author will not be able to plot a <strong>Distribution</strong> of student scores across subjects.</p>
<p>I will revert to the original large data set to extract PV1 scores which are available for all students to create new plots to visualize the distribution of scores.</p>
</div>
</div>
</section>
<section id="sketch-of-proposed-design" class="level3">
<h3 class="anchored" data-anchor-id="sketch-of-proposed-design">3.1.2 Sketch of Proposed Design</h3>
<p>Rough sketch of proposed design is shown below.</p>
<p><img src="images/clipboard-3845138551.png" class="img-fluid"></p>
</section>
<section id="remake" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="remake">3.1.3 Remake</h3>
<p>The original data sub set and plot is unable to exhibit the distribution of student scores across subjects, due to the lack of scores at an individual student level.</p>
<p>First, I will use the code below derive some reference lines (mean and median) for our histograms.</p>
<p>To populate the distribution of scores for the student cohort, I will use PV1 scores, which are available for all students.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>mean_pv1math <span class="ot">&lt;-</span> <span class="fu">mean</span>(stu_qqq_SG<span class="sc">$</span>PV1MATH)</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>median_pv1math <span class="ot">&lt;-</span> <span class="fu">median</span>(stu_qqq_SG<span class="sc">$</span>PV1MATH)</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>mean_pv1read <span class="ot">&lt;-</span> <span class="fu">mean</span>(stu_qqq_SG<span class="sc">$</span>PV1READ)</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>median_pv1read <span class="ot">&lt;-</span> <span class="fu">median</span>(stu_qqq_SG<span class="sc">$</span>PV1READ)</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>mean_pv1scie <span class="ot">&lt;-</span> <span class="fu">mean</span>(stu_qqq_SG<span class="sc">$</span>PV1SCIE)</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>median_pv1scie <span class="ot">&lt;-</span> <span class="fu">median</span>(stu_qqq_SG<span class="sc">$</span>PV1SCIE)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, I will use the code below and extract data points (PV1 scores) from the original large data set to create Histograms with Density plots for each subject.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>p_1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(stu_qqq_SG, <span class="fu">aes</span>(<span class="at">x =</span> PV1MATH)) <span class="sc">+</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">binwidth =</span> <span class="dv">20</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="st">'lightblue'</span>) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Math Scores"</span>, <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span> <span class="co"># Change label to 'Density'</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> mean_pv1math, <span class="at">color =</span> <span class="st">'black'</span>, <span class="at">size =</span> <span class="fl">0.65</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> mean_pv1math, <span class="at">y =</span> <span class="fl">0.0025</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Mean:"</span>, <span class="fu">round</span>(mean_pv1math, <span class="dv">2</span>))), <span class="co"># Adjust y position for text</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">hjust =</span> <span class="fl">1.75</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> median_pv1math, <span class="at">color =</span> <span class="st">'red'</span>, <span class="at">size =</span> <span class="fl">0.65</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> median_pv1math, <span class="at">y =</span> <span class="fl">0.0025</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Median:"</span>, <span class="fu">round</span>(median_pv1math, <span class="dv">2</span>))), <span class="co"># Adjust y position for text</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.75</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>p_2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(stu_qqq_SG, <span class="fu">aes</span>(<span class="at">x =</span> PV1READ)) <span class="sc">+</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">binwidth =</span> <span class="dv">20</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="st">'lightgreen'</span>) <span class="sc">+</span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span> </span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Reading Scores"</span>, <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span> </span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> mean_pv1read, <span class="at">color =</span> <span class="st">'black'</span>, <span class="at">size =</span> <span class="fl">0.65</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> mean_pv1read, <span class="at">y =</span> <span class="fl">0.0025</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Mean:"</span>, <span class="fu">round</span>(mean_pv1read, <span class="dv">2</span>))), <span class="co"># Adjust y position for text</span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">hjust =</span> <span class="fl">1.75</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> median_pv1read, <span class="at">color =</span> <span class="st">'red'</span>, <span class="at">size =</span> <span class="fl">0.65</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> median_pv1read, <span class="at">y =</span> <span class="fl">0.0025</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Median:"</span>, <span class="fu">round</span>(median_pv1read, <span class="dv">2</span>))), <span class="co"># Adjust y position for text</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.75</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>p_3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(stu_qqq_SG, <span class="fu">aes</span>(<span class="at">x =</span> PV1SCIE)) <span class="sc">+</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">binwidth =</span> <span class="dv">20</span>, <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">fill=</span><span class="st">'lightpink'</span>) <span class="sc">+</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">color =</span> <span class="st">"purple"</span>) <span class="sc">+</span>  </span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Science Scores"</span>, <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span> </span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> mean_pv1scie, <span class="at">color =</span> <span class="st">'black'</span>, <span class="at">size =</span> <span class="fl">0.65</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> mean_pv1scie, <span class="at">y =</span> <span class="fl">0.0025</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Mean:"</span>, <span class="fu">round</span>(mean_pv1scie, <span class="dv">2</span>))), <span class="co"># Adjust y position for text</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">hjust =</span> <span class="fl">1.75</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_vline</span>(<span class="at">xintercept =</span> median_pv1scie, <span class="at">color =</span> <span class="st">'red'</span>, <span class="at">size =</span> <span class="fl">0.65</span>, <span class="at">linetype =</span> <span class="st">"dashed"</span>) <span class="sc">+</span></span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> median_pv1scie, <span class="at">y =</span> <span class="fl">0.0025</span>, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Median:"</span>, <span class="fu">round</span>(median_pv1scie, <span class="dv">2</span>))), <span class="co"># Adjust y position for text</span></span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.75</span>, <span class="at">size =</span> <span class="dv">3</span></span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a>p_4 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(stu_qqq_SG, <span class="fu">aes</span>(<span class="at">x =</span> PV1MATH, <span class="at">fill =</span> <span class="st">"Math"</span>)) <span class="sc">+</span></span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">data =</span> stu_qqq_SG, <span class="fu">aes</span>(<span class="at">x =</span> PV1READ, <span class="at">fill =</span> <span class="st">"Reading"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">data =</span> stu_qqq_SG, <span class="fu">aes</span>(<span class="at">x =</span> PV1SCIE, <span class="at">fill =</span> <span class="st">"Science"</span>), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Combined Scores"</span>,</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Density"</span>) <span class="sc">+</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Math"</span> <span class="ot">=</span> <span class="st">"lightblue"</span>, <span class="st">"Reading"</span> <span class="ot">=</span> <span class="st">"lightgreen"</span>, <span class="st">"Science"</span> <span class="ot">=</span> <span class="st">"lightpink"</span>)) <span class="sc">+</span></span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">guides</span>(<span class="at">fill =</span> <span class="cn">FALSE</span>) <span class="sc">+</span>  <span class="co"># Remove the legend</span></span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Finally, using the code below, I will create a composite graph for all the histograms and density plots.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>patch1 <span class="ot">&lt;-</span> (p_1 <span class="sc">+</span> p_2) <span class="sc">/</span> (p_3 <span class="sc">+</span> p_4)  <span class="sc">+</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">plot_annotation</span>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">title =</span> <span class="st">"Distribution of student performance in Math, Reading and Science"</span>,</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">subtitle =</span> <span class="st">"All subjects exhibit a slight left-skewed distribution"</span> )</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>patch1 <span class="sc">&amp;</span> <span class="fu">theme</span>( <span class="at">axis.text.y =</span> <span class="fu">element_blank</span>(),<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="R_Ex3_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img column-body-outset-right" width="960"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Revised Plot
</div>
</div>
<div class="callout-body-container callout-body">
<p>The revised plot consists of a patchwork of 3 histograms with density curves, and a combined density curve overlay for the 3 subjects.<br>
<br>
Reference lines for the mean and median scores are added to enable readers to infer the skewness of the distribution of student scores.<br>
<br>
The revised plot will enable readers to quickly infer the nature of the distributions of the subject scores for the student cohort.</p>
</div>
</div>
</section>
</section>
<section id="distribution-of-students-performance-in-math-science-and-reading-across-schools" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="distribution-of-students-performance-in-math-science-and-reading-across-schools">3.2 Distribution of students’ performance in Math, Science and Reading across schools</h2>
<p>The author has used the <a href="https://www.rdocumentation.org/packages/intsvy/versions/2.8/topics/pisa.mean.pv"><code>pisa.mean.pv</code></a> function from <a href="https://daniel-caro.com/r-intsvy"><code>intsvy</code></a><code>package</code>, to obtain the composite Mean and Standard Deviation values from “PV1MATH” to “PV10MATH”, “PV1READ” to “PV10READ” and “PV1SCIE” to “PV10SCIE” for each school.</p>
<p>The code below generates the composite PV values.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>pvmathsch <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"MATH"</span>),<span class="at">by=</span> <span class="st">"CNTSCHID"</span>, <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvmath_bysch"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>pvreadsch <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"READ"</span>),<span class="at">by=</span> <span class="st">"CNTSCHID"</span>, <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvread_bysch"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>pvsciesch <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"SCIE"</span>),<span class="at">by=</span> <span class="st">"CNTSCHID"</span>, <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvscie_bysch"</span>,<span class="at">folder=</span>data_folder_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>A plot to show the distribution of students performance in Math, Reading and Science scores across schools was generated using the code below.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">The Original plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">The code</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p><img src="images/clipboard-1617135863.png" class="img-fluid"></p>
<p>The author had created a series of error bars across the 3 subjects to represent the subject scores by each school id (164 schools).</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>p2<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pvmathsch, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(CNTSCHID), <span class="at">y =</span> Mean)) <span class="sc">+</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>),<span class="at">lwd=</span><span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> mean,</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">18</span>,</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">5</span>,</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>),</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"red"</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD),</span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.8</span>,</span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">1</span>,</span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="dv">10</span>)</span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Math Scores by School"</span>) <span class="sc">+</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Math Score"</span>) <span class="sc">+</span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"School ID"</span>)<span class="sc">+</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1000</span>),<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="at">by=</span><span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size=</span><span class="dv">20</span>)             </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="evaluation-1" class="level3">
<h3 class="anchored" data-anchor-id="evaluation-1">3.2.1 Evaluation</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 40%">
<col style="width: 54%">
</colgroup>
<thead>
<tr class="header">
<th>Assessment Criteria</th>
<th>Critique/Feedback</th>
<th>Possible Improvements</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Clarity</strong></td>
<td><ol type="1">
<li><p>Although the original plot enables me to visualize the differences in scores across schools, I am unclear as to which score this is showing. Is it showing me the range of student scores by school ID?</p></li>
<li><p>Graph is titled as “Subject Scores by school”, however the code indicates that mean scores +/- one standard deviation were generated instead.</p></li>
<li><p>The data subset used for this visualization only has 164 observations and 6 variables. Upon inspecting the data set, this subset is basically the composite mean subject scores for each school.</p></li>
</ol></td>
<td><ol type="1">
<li>The original subset can still be used, but the code will need to be changed for the revised visualization. This new visualization will retain the original intent to show the different mean scores for each of the 164 schools to visualize the relative performance between schools.</li>
</ol></td>
</tr>
<tr class="even">
<td><strong>Aesthetics</strong></td>
<td><ol type="1">
<li><p>The use of a vertically long plot to compare the scores across schools makes it visually challenging and difficult to spot differences in scores, and identify any clusters.</p></li>
<li><p>Since there are 164 schools, the use of a vertically long format makes it difficult to read the school IDs on the Y-axis. There are too many schools to make identification off the Y-axis easy.</p></li>
<li><p>The distance between the X-axis, which shows the scores is too far apart from the error bars. I am unable to decipher what are the actual scores or score range for each error bar.</p></li>
<li><p>The graph is stiched side by side, resulting in the Y-axis being repeated 3 times. The order of the School IDs are all the same, hence this creates additional non-data ink, that makes the graph too “busy”.</p></li>
</ol></td>
<td><ol type="1">
<li><p>To revise the design of a vertically long format and re-make it to a horizontally compact visualization, by using bubble plots.</p></li>
<li><p>To minimize axis labels, we can drop axis labels for school id, and only identify and directly annotate the top &amp; bottom 5 schools instead.</p></li>
<li><p>To remove the 2 other repetitive Y-axes to reduce non-data ink.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<p>Examining the subset used for the original plot in more detail.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(pvmathsch))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  CNTSCHID Freq   Mean  s.e.    SD   s.e
1 70200001   55 725.21  9.34 59.23  6.38
2 70200002   37 536.19 17.09 90.27 14.50
3 70200003   36 739.92 12.30 59.23  7.70
4 70200004   56 509.61 12.84 86.63  7.71
5 70200005   37 548.39 13.10 86.30  9.18
6 70200006   36 485.30 13.90 76.47  8.86</code></pre>
</div>
</div>
<p>The <em>pvmathsch</em> subset table only has 164 observations and 6 variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conclusion
</div>
</div>
<div class="callout-body-container callout-body">
<p>The data subset can only be used to visualize the mean scores per school ID.</p>
<p>The original graph is not of a suitable design to help readers easily and quickly understand the disparity in performances between schools.</p>
<p>I will use a new compact visualization to enable the reader to quickly see the differences in school performance.</p>
</div>
</div>
</section>
<section id="sketch-of-proposed-design-1" class="level3">
<h3 class="anchored" data-anchor-id="sketch-of-proposed-design-1">3.2.2 Sketch of Proposed Design</h3>
<p>Rough sketch of proposed design is shown below.</p>
<p><img src="images/clipboard-150633865.png" class="img-fluid"></p>
</section>
<section id="remake-1" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="remake-1">3.2.3 Remake</h3>
<p>The original plot does not enable the reader to quickly capture information from the data points.</p>
<p>Using the exact same data set, I will use the code below to re-make the original graph into a Bubble plots instead. I will employ color as a means to differentiate the mean scores.</p>
<p>I have also added reference lines to show the 10th and 90th percentile scores to help readers easily identify the schools belonging to these two opposite segments.</p>
<p>Lastly, I have also added annotations to help readers to quickly identify the top 5 and bottom 5 schools with the best and worst mean scores.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggrepel)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify the top 5 and bottom 5 schools</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>top_5 <span class="ot">&lt;-</span> pvmathsch <span class="sc">%&gt;%</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(Mean)) <span class="sc">%&gt;%</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>bottom_5 <span class="ot">&lt;-</span> pvmathsch <span class="sc">%&gt;%</span> </span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Mean) <span class="sc">%&gt;%</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>)</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Base plot with points colored by the mean score</span></span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pvmathsch, <span class="fu">aes</span>(<span class="at">x =</span> CNTSCHID, <span class="at">y =</span> Mean)) <span class="sc">+</span></span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">color =</span> Mean), <span class="at">alpha =</span> <span class="fl">0.5</span>, <span class="at">size =</span> <span class="dv">7</span>) <span class="sc">+</span></span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_gradient</span>(<span class="at">low =</span> <span class="st">"red"</span>, <span class="at">high =</span> <span class="st">"green"</span>) <span class="sc">+</span></span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Mean Math Scores per School"</span>,</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"5 Schools with the Best &amp; Worst mean scores"</span>,</span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>       <span class="at">x =</span> <span class="st">"School ID"</span>,</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Mean Math Scores"</span>) <span class="sc">+</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>        <span class="at">axis.ticks.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>        <span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>())  <span class="co"># Remove major grid lines</span></span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>       </span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a><span class="co"># Annotate the top 5 and bottom 5 schools</span></span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> p1 <span class="sc">+</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> top_5, </span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> CNTSCHID, <span class="at">y =</span> Mean), </span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span>, </span>
<span id="cb21-32"><a href="#cb21-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb21-33"><a href="#cb21-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="dv">12</span>,   <span class="co"># Adjust nudge_y if necessary to move text up or down</span></span>
<span id="cb21-34"><a href="#cb21-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">"y"</span></span>
<span id="cb21-35"><a href="#cb21-35" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb21-36"><a href="#cb21-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text_repel</span>(</span>
<span id="cb21-37"><a href="#cb21-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> bottom_5, </span>
<span id="cb21-38"><a href="#cb21-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">label =</span> CNTSCHID, <span class="at">y =</span> Mean), </span>
<span id="cb21-39"><a href="#cb21-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"blue"</span>, </span>
<span id="cb21-40"><a href="#cb21-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">3</span>, </span>
<span id="cb21-41"><a href="#cb21-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">nudge_y =</span> <span class="sc">-</span><span class="dv">12</span>,  <span class="co"># Adjust nudge_y if necessary to move text up or down</span></span>
<span id="cb21-42"><a href="#cb21-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">direction =</span> <span class="st">"y"</span></span>
<span id="cb21-43"><a href="#cb21-43" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-44"><a href="#cb21-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-45"><a href="#cb21-45" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate the 10th and 90th percentiles</span></span>
<span id="cb21-46"><a href="#cb21-46" aria-hidden="true" tabindex="-1"></a>percentile10 <span class="ot">&lt;-</span> <span class="fu">quantile</span>(pvmathsch<span class="sc">$</span>Mean, <span class="at">probs =</span> <span class="fl">0.10</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-47"><a href="#cb21-47" aria-hidden="true" tabindex="-1"></a>percentile90 <span class="ot">&lt;-</span> <span class="fu">quantile</span>(pvmathsch<span class="sc">$</span>Mean, <span class="at">probs =</span> <span class="fl">0.90</span>, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb21-48"><a href="#cb21-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-49"><a href="#cb21-49" aria-hidden="true" tabindex="-1"></a><span class="co"># Add horizontal lines for the 10th and 90th percentiles to your plot</span></span>
<span id="cb21-50"><a href="#cb21-50" aria-hidden="true" tabindex="-1"></a>p1 <span class="ot">&lt;-</span> p1 <span class="sc">+</span> </span>
<span id="cb21-51"><a href="#cb21-51" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> percentile10, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb21-52"><a href="#cb21-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hline</span>(<span class="at">yintercept =</span> percentile90, <span class="at">linetype =</span> <span class="st">"dashed"</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb21-53"><a href="#cb21-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> percentile10, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"10th Percentile:"</span>, <span class="fu">round</span>(percentile10, <span class="dv">2</span>))), </span>
<span id="cb21-54"><a href="#cb21-54" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="fl">1.05</span>, <span class="at">vjust =</span> <span class="dv">0</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">3</span>) <span class="sc">+</span></span>
<span id="cb21-55"><a href="#cb21-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="cn">Inf</span>, <span class="at">y =</span> percentile90, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"90th Percentile:"</span>, <span class="fu">round</span>(percentile90, <span class="dv">2</span>))), </span>
<span id="cb21-56"><a href="#cb21-56" aria-hidden="true" tabindex="-1"></a>            <span class="at">hjust =</span> <span class="fl">1.05</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="dv">3</span>)</span>
<span id="cb21-57"><a href="#cb21-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-58"><a href="#cb21-58" aria-hidden="true" tabindex="-1"></a>p1</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="R_Ex3_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img column-body-outset-right" width="768"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Revised Plot
</div>
</div>
<div class="callout-body-container callout-body">
<p>The use of colour can help readers quickly differentiate the scores between schools.<br>
<br>
I have annotated school IDs for the top and bottom 5 schools for readers to quickly identify the “best” and “worst” schools.</p>
<p>I have also added reference lines for the 10th and 90th Percentile. Here we can quickly see that while most of the 164 schools attain the same range of mean scores, there are a number of schools that outperform the rest.</p>
<p>Annotating all the 164 school IDs will add too much ink to the plot. Hence, we can consider having another interactive plot (below) for readers to examine the data points in more detail at their descretion.</p>
</div>
</div>
<p>For interactivity, I have used <code>ggplotly()</code> to convert this to an interactive graph. With the added interactivity, readers can use the tooltip function to get more information on the data points.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(plotly)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert to an interactive plot</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplotly</span>(p1, <span class="at">tooltip =</span> <span class="fu">c</span>(<span class="st">"x"</span>, <span class="st">"y"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-7dce81957798acd2195c" style="width:100%;height:464px;"></div>
<script type="application/json" data-for="htmlwidget-7dce81957798acd2195c">{"x":{"data":[{"x":[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164],"y":[725.21000000000004,536.19000000000005,739.91999999999996,509.61000000000001,548.38999999999999,485.30000000000001,578.63,566.75,559.75999999999999,535.45000000000005,597.92999999999995,655.37,519.48000000000002,577.32000000000005,538.60000000000002,569.57000000000005,583.48000000000002,680.12,591.59000000000003,650.58000000000004,498.98000000000002,564.94000000000005,551.65999999999997,510.69,531.98000000000002,549.11000000000001,527.60000000000002,635.08000000000004,493.30000000000001,509.68000000000001,567.53999999999996,560.32000000000005,645.74000000000001,528.19000000000005,648.22000000000003,528.73000000000002,558.95000000000005,521.25,567.57000000000005,669.92999999999995,564.25,523.97000000000003,565,688.19000000000005,529.28999999999996,605.61000000000001,588.50999999999999,556.77999999999997,559.80999999999995,587.58000000000004,560.76999999999998,580.63999999999999,676.07000000000005,543.41999999999996,505.72000000000003,473.60000000000002,566.37,536.29999999999995,546.02999999999997,657.10000000000002,568.51999999999998,684.12,609.13,651.46000000000004,499.51999999999998,644.25,571.27999999999997,570.03999999999996,517.10000000000002,500.33999999999997,646.80999999999995,562.75999999999999,636.67999999999995,517.41999999999996,650.38,587.23000000000002,548.79999999999995,595.22000000000003,619.02999999999997,581.66999999999996,603.99000000000001,671.41999999999996,562.75999999999999,505.99000000000001,557.05999999999995,537.82000000000005,566.51999999999998,591.35000000000002,545.75,644.64999999999998,646.99000000000001,590.86000000000001,549.84000000000003,544.25,620.34000000000003,574.82000000000005,537.60000000000002,534.48000000000002,513.01999999999998,494.43000000000001,699.59000000000003,519.12,564.01999999999998,634.83000000000004,539.09000000000003,564.53999999999996,542.28999999999996,591.72000000000003,496.29000000000002,688.50999999999999,585.26999999999998,587.28999999999996,663.19000000000005,562.17999999999995,405.42000000000002,507.33999999999997,574.25,524.89999999999998,679.03999999999996,588.32000000000005,529.49000000000001,579.92999999999995,542.10000000000002,562.16999999999996,583.63,574.41999999999996,517.29999999999995,505.60000000000002,503.98000000000002,586.41999999999996,566.47000000000003,658.17999999999995,556.00999999999999,521.41999999999996,615.23000000000002,554.99000000000001,500.81999999999999,585.40999999999997,690.24000000000001,511.41000000000003,505.89999999999998,644.08000000000004,506.18000000000001,589.88,543.12,536.66999999999996,565.66999999999996,580.97000000000003,386.48000000000002,564.99000000000001,484.38,534.80999999999995,514.54999999999995,685.36000000000001,576.17999999999995,555.21000000000004,551.78999999999996,579.23000000000002,562.85000000000002,526.33000000000004,610.73000000000002,533.32000000000005,470.51999999999998,534.69000000000005],"text":["CNTSCHID: 70200001<br />Mean: 725.21","CNTSCHID: 70200002<br />Mean: 536.19","CNTSCHID: 70200003<br />Mean: 739.92","CNTSCHID: 70200004<br />Mean: 509.61","CNTSCHID: 70200005<br />Mean: 548.39","CNTSCHID: 70200006<br />Mean: 485.30","CNTSCHID: 70200007<br />Mean: 578.63","CNTSCHID: 70200008<br />Mean: 566.75","CNTSCHID: 70200009<br />Mean: 559.76","CNTSCHID: 70200010<br />Mean: 535.45","CNTSCHID: 70200011<br />Mean: 597.93","CNTSCHID: 70200012<br />Mean: 655.37","CNTSCHID: 70200013<br />Mean: 519.48","CNTSCHID: 70200014<br />Mean: 577.32","CNTSCHID: 70200015<br />Mean: 538.60","CNTSCHID: 70200016<br />Mean: 569.57","CNTSCHID: 70200017<br />Mean: 583.48","CNTSCHID: 70200018<br />Mean: 680.12","CNTSCHID: 70200019<br />Mean: 591.59","CNTSCHID: 70200020<br />Mean: 650.58","CNTSCHID: 70200021<br />Mean: 498.98","CNTSCHID: 70200022<br />Mean: 564.94","CNTSCHID: 70200023<br />Mean: 551.66","CNTSCHID: 70200024<br />Mean: 510.69","CNTSCHID: 70200025<br />Mean: 531.98","CNTSCHID: 70200026<br />Mean: 549.11","CNTSCHID: 70200027<br />Mean: 527.60","CNTSCHID: 70200028<br />Mean: 635.08","CNTSCHID: 70200029<br />Mean: 493.30","CNTSCHID: 70200030<br />Mean: 509.68","CNTSCHID: 70200031<br />Mean: 567.54","CNTSCHID: 70200032<br />Mean: 560.32","CNTSCHID: 70200033<br />Mean: 645.74","CNTSCHID: 70200034<br />Mean: 528.19","CNTSCHID: 70200035<br />Mean: 648.22","CNTSCHID: 70200036<br />Mean: 528.73","CNTSCHID: 70200037<br />Mean: 558.95","CNTSCHID: 70200038<br />Mean: 521.25","CNTSCHID: 70200039<br />Mean: 567.57","CNTSCHID: 70200040<br />Mean: 669.93","CNTSCHID: 70200041<br />Mean: 564.25","CNTSCHID: 70200042<br />Mean: 523.97","CNTSCHID: 70200043<br />Mean: 565.00","CNTSCHID: 70200044<br />Mean: 688.19","CNTSCHID: 70200045<br />Mean: 529.29","CNTSCHID: 70200046<br />Mean: 605.61","CNTSCHID: 70200047<br />Mean: 588.51","CNTSCHID: 70200048<br />Mean: 556.78","CNTSCHID: 70200049<br />Mean: 559.81","CNTSCHID: 70200050<br />Mean: 587.58","CNTSCHID: 70200051<br />Mean: 560.77","CNTSCHID: 70200052<br />Mean: 580.64","CNTSCHID: 70200053<br />Mean: 676.07","CNTSCHID: 70200054<br />Mean: 543.42","CNTSCHID: 70200055<br />Mean: 505.72","CNTSCHID: 70200056<br />Mean: 473.60","CNTSCHID: 70200057<br />Mean: 566.37","CNTSCHID: 70200058<br />Mean: 536.30","CNTSCHID: 70200059<br />Mean: 546.03","CNTSCHID: 70200060<br />Mean: 657.10","CNTSCHID: 70200061<br />Mean: 568.52","CNTSCHID: 70200062<br />Mean: 684.12","CNTSCHID: 70200063<br />Mean: 609.13","CNTSCHID: 70200064<br />Mean: 651.46","CNTSCHID: 70200065<br />Mean: 499.52","CNTSCHID: 70200066<br />Mean: 644.25","CNTSCHID: 70200067<br />Mean: 571.28","CNTSCHID: 70200068<br />Mean: 570.04","CNTSCHID: 70200069<br />Mean: 517.10","CNTSCHID: 70200070<br />Mean: 500.34","CNTSCHID: 70200071<br />Mean: 646.81","CNTSCHID: 70200072<br />Mean: 562.76","CNTSCHID: 70200073<br />Mean: 636.68","CNTSCHID: 70200074<br />Mean: 517.42","CNTSCHID: 70200075<br />Mean: 650.38","CNTSCHID: 70200076<br />Mean: 587.23","CNTSCHID: 70200077<br />Mean: 548.80","CNTSCHID: 70200078<br />Mean: 595.22","CNTSCHID: 70200079<br />Mean: 619.03","CNTSCHID: 70200080<br />Mean: 581.67","CNTSCHID: 70200081<br />Mean: 603.99","CNTSCHID: 70200082<br />Mean: 671.42","CNTSCHID: 70200083<br />Mean: 562.76","CNTSCHID: 70200084<br />Mean: 505.99","CNTSCHID: 70200085<br />Mean: 557.06","CNTSCHID: 70200086<br />Mean: 537.82","CNTSCHID: 70200087<br />Mean: 566.52","CNTSCHID: 70200088<br />Mean: 591.35","CNTSCHID: 70200089<br />Mean: 545.75","CNTSCHID: 70200090<br />Mean: 644.65","CNTSCHID: 70200091<br />Mean: 646.99","CNTSCHID: 70200092<br />Mean: 590.86","CNTSCHID: 70200093<br />Mean: 549.84","CNTSCHID: 70200094<br />Mean: 544.25","CNTSCHID: 70200095<br />Mean: 620.34","CNTSCHID: 70200096<br />Mean: 574.82","CNTSCHID: 70200097<br />Mean: 537.60","CNTSCHID: 70200098<br />Mean: 534.48","CNTSCHID: 70200099<br />Mean: 513.02","CNTSCHID: 70200100<br />Mean: 494.43","CNTSCHID: 70200101<br />Mean: 699.59","CNTSCHID: 70200102<br />Mean: 519.12","CNTSCHID: 70200103<br />Mean: 564.02","CNTSCHID: 70200104<br />Mean: 634.83","CNTSCHID: 70200105<br />Mean: 539.09","CNTSCHID: 70200106<br />Mean: 564.54","CNTSCHID: 70200107<br />Mean: 542.29","CNTSCHID: 70200108<br />Mean: 591.72","CNTSCHID: 70200109<br />Mean: 496.29","CNTSCHID: 70200110<br />Mean: 688.51","CNTSCHID: 70200111<br />Mean: 585.27","CNTSCHID: 70200112<br />Mean: 587.29","CNTSCHID: 70200113<br />Mean: 663.19","CNTSCHID: 70200114<br />Mean: 562.18","CNTSCHID: 70200115<br />Mean: 405.42","CNTSCHID: 70200116<br />Mean: 507.34","CNTSCHID: 70200117<br />Mean: 574.25","CNTSCHID: 70200118<br />Mean: 524.90","CNTSCHID: 70200119<br />Mean: 679.04","CNTSCHID: 70200120<br />Mean: 588.32","CNTSCHID: 70200121<br />Mean: 529.49","CNTSCHID: 70200122<br />Mean: 579.93","CNTSCHID: 70200123<br />Mean: 542.10","CNTSCHID: 70200124<br />Mean: 562.17","CNTSCHID: 70200125<br />Mean: 583.63","CNTSCHID: 70200126<br />Mean: 574.42","CNTSCHID: 70200127<br />Mean: 517.30","CNTSCHID: 70200128<br />Mean: 505.60","CNTSCHID: 70200129<br />Mean: 503.98","CNTSCHID: 70200130<br />Mean: 586.42","CNTSCHID: 70200131<br />Mean: 566.47","CNTSCHID: 70200132<br />Mean: 658.18","CNTSCHID: 70200133<br />Mean: 556.01","CNTSCHID: 70200134<br />Mean: 521.42","CNTSCHID: 70200135<br />Mean: 615.23","CNTSCHID: 70200136<br />Mean: 554.99","CNTSCHID: 70200137<br />Mean: 500.82","CNTSCHID: 70200138<br />Mean: 585.41","CNTSCHID: 70200139<br />Mean: 690.24","CNTSCHID: 70200140<br />Mean: 511.41","CNTSCHID: 70200141<br />Mean: 505.90","CNTSCHID: 70200142<br />Mean: 644.08","CNTSCHID: 70200143<br />Mean: 506.18","CNTSCHID: 70200144<br />Mean: 589.88","CNTSCHID: 70200145<br />Mean: 543.12","CNTSCHID: 70200146<br />Mean: 536.67","CNTSCHID: 70200147<br />Mean: 565.67","CNTSCHID: 70200148<br />Mean: 580.97","CNTSCHID: 70200149<br />Mean: 386.48","CNTSCHID: 70200151<br />Mean: 564.99","CNTSCHID: 70200152<br />Mean: 484.38","CNTSCHID: 70200153<br />Mean: 534.81","CNTSCHID: 70200154<br />Mean: 514.55","CNTSCHID: 70200155<br />Mean: 685.36","CNTSCHID: 70200156<br />Mean: 576.18","CNTSCHID: 70200157<br />Mean: 555.21","CNTSCHID: 70200158<br />Mean: 551.79","CNTSCHID: 70200159<br />Mean: 579.23","CNTSCHID: 70200160<br />Mean: 562.85","CNTSCHID: 70200161<br />Mean: 526.33","CNTSCHID: 70200162<br />Mean: 610.73","CNTSCHID: 70200163<br />Mean: 533.32","CNTSCHID: 70200164<br />Mean: 470.52","CNTSCHID: 70200165<br />Mean: 534.69"],"type":"scatter","mode":"markers","marker":{"autocolorscale":false,"color":["rgba(67,248,0,1)","rgba(211,156,0,1)","rgba(0,255,0,1)","rgba(221,141,0,1)","rgba(207,163,0,1)","rgba(229,126,0,1)","rgba(194,179,0,1)","rgba(199,173,0,1)","rgba(202,169,0,1)","rgba(212,156,0,1)","rgba(184,189,0,1)","rgba(149,217,0,1)","rgba(218,147,0,1)","rgba(194,178,0,1)","rgba(211,158,0,1)","rgba(198,174,0,1)","rgba(191,182,0,1)","rgba(128,228,0,1)","rgba(187,186,0,1)","rgba(152,214,0,1)","rgba(225,134,0,1)","rgba(200,172,0,1)","rgba(205,165,0,1)","rgba(221,142,0,1)","rgba(213,154,0,1)","rgba(206,163,0,1)","rgba(215,151,0,1)","rgba(163,207,0,1)","rgba(226,131,0,1)","rgba(221,141,0,1)","rgba(199,173,0,1)","rgba(202,169,0,1)","rgba(156,212,0,1)","rgba(214,152,0,1)","rgba(154,213,0,1)","rgba(214,152,0,1)","rgba(202,169,0,1)","rgba(217,148,0,1)","rgba(199,173,0,1)","rgba(137,223,0,1)","rgba(200,172,0,1)","rgba(216,149,0,1)","rgba(200,172,0,1)","rgba(120,232,0,1)","rgba(214,152,0,1)","rgba(180,193,0,1)","rgba(189,184,0,1)","rgba(203,168,0,1)","rgba(202,169,0,1)","rgba(189,184,0,1)","rgba(202,170,0,1)","rgba(193,180,0,1)","rgba(132,226,0,1)","rgba(209,160,0,1)","rgba(222,139,0,1)","rgba(233,118,0,1)","rgba(199,173,0,1)","rgba(211,156,0,1)","rgba(208,162,0,1)","rgba(148,217,0,1)","rgba(198,174,0,1)","rgba(124,230,0,1)","rgba(178,194,0,1)","rgba(152,215,0,1)","rgba(224,135,0,1)","rgba(157,211,0,1)","rgba(197,175,0,1)","rgba(198,175,0,1)","rgba(218,145,0,1)","rgba(224,135,0,1)","rgba(155,213,0,1)","rgba(201,171,0,1)","rgba(162,208,0,1)","rgba(218,146,0,1)","rgba(153,214,0,1)","rgba(190,183,0,1)","rgba(207,163,0,1)","rgba(186,187,0,1)","rgba(173,199,0,1)","rgba(192,181,0,1)","rgba(181,192,0,1)","rgba(136,224,0,1)","rgba(201,171,0,1)","rgba(222,139,0,1)","rgba(203,168,0,1)","rgba(211,157,0,1)","rgba(199,173,0,1)","rgba(188,186,0,1)","rgba(208,162,0,1)","rgba(157,212,0,1)","rgba(155,213,0,1)","rgba(188,185,0,1)","rgba(206,164,0,1)","rgba(208,161,0,1)","rgba(172,200,0,1)","rgba(195,177,0,1)","rgba(211,157,0,1)","rgba(212,155,0,1)","rgba(220,143,0,1)","rgba(226,131,0,1)","rgba(108,237,0,1)","rgba(218,147,0,1)","rgba(200,171,0,1)","rgba(163,207,0,1)","rgba(210,158,0,1)","rgba(200,172,0,1)","rgba(209,160,0,1)","rgba(187,186,0,1)","rgba(226,133,0,1)","rgba(120,232,0,1)","rgba(191,182,0,1)","rgba(190,183,0,1)","rgba(143,220,0,1)","rgba(201,170,0,1)","rgba(251,53,0,1)","rgba(222,140,0,1)","rgba(196,177,0,1)","rgba(216,150,0,1)","rgba(129,228,0,1)","rgba(189,184,0,1)","rgba(214,153,0,1)","rgba(193,180,0,1)","rgba(209,160,0,1)","rgba(201,170,0,1)","rgba(191,182,0,1)","rgba(196,177,0,1)","rgba(218,145,0,1)","rgba(222,138,0,1)","rgba(223,137,0,1)","rgba(190,183,0,1)","rgba(199,173,0,1)","rgba(147,218,0,1)","rgba(204,167,0,1)","rgba(217,148,0,1)","rgba(175,197,0,1)","rgba(204,167,0,1)","rgba(224,136,0,1)","rgba(190,183,0,1)","rgba(118,233,0,1)","rgba(220,142,0,1)","rgba(222,139,0,1)","rgba(157,211,0,1)","rgba(222,139,0,1)","rgba(188,185,0,1)","rgba(209,160,0,1)","rgba(211,157,0,1)","rgba(199,172,0,1)","rgba(193,180,0,1)","rgba(255,0,0,1)","rgba(200,172,0,1)","rgba(229,125,0,1)","rgba(212,156,0,1)","rgba(219,144,0,1)","rgba(123,230,0,1)","rgba(195,178,0,1)","rgba(204,167,0,1)","rgba(205,165,0,1)","rgba(193,179,0,1)","rgba(201,171,0,1)","rgba(215,151,0,1)","rgba(177,195,0,1)","rgba(213,155,0,1)","rgba(233,115,0,1)","rgba(212,155,0,1)"],"opacity":0.5,"size":26.45669291338583,"symbol":"circle","line":{"width":1.8897637795275593,"color":["rgba(67,248,0,1)","rgba(211,156,0,1)","rgba(0,255,0,1)","rgba(221,141,0,1)","rgba(207,163,0,1)","rgba(229,126,0,1)","rgba(194,179,0,1)","rgba(199,173,0,1)","rgba(202,169,0,1)","rgba(212,156,0,1)","rgba(184,189,0,1)","rgba(149,217,0,1)","rgba(218,147,0,1)","rgba(194,178,0,1)","rgba(211,158,0,1)","rgba(198,174,0,1)","rgba(191,182,0,1)","rgba(128,228,0,1)","rgba(187,186,0,1)","rgba(152,214,0,1)","rgba(225,134,0,1)","rgba(200,172,0,1)","rgba(205,165,0,1)","rgba(221,142,0,1)","rgba(213,154,0,1)","rgba(206,163,0,1)","rgba(215,151,0,1)","rgba(163,207,0,1)","rgba(226,131,0,1)","rgba(221,141,0,1)","rgba(199,173,0,1)","rgba(202,169,0,1)","rgba(156,212,0,1)","rgba(214,152,0,1)","rgba(154,213,0,1)","rgba(214,152,0,1)","rgba(202,169,0,1)","rgba(217,148,0,1)","rgba(199,173,0,1)","rgba(137,223,0,1)","rgba(200,172,0,1)","rgba(216,149,0,1)","rgba(200,172,0,1)","rgba(120,232,0,1)","rgba(214,152,0,1)","rgba(180,193,0,1)","rgba(189,184,0,1)","rgba(203,168,0,1)","rgba(202,169,0,1)","rgba(189,184,0,1)","rgba(202,170,0,1)","rgba(193,180,0,1)","rgba(132,226,0,1)","rgba(209,160,0,1)","rgba(222,139,0,1)","rgba(233,118,0,1)","rgba(199,173,0,1)","rgba(211,156,0,1)","rgba(208,162,0,1)","rgba(148,217,0,1)","rgba(198,174,0,1)","rgba(124,230,0,1)","rgba(178,194,0,1)","rgba(152,215,0,1)","rgba(224,135,0,1)","rgba(157,211,0,1)","rgba(197,175,0,1)","rgba(198,175,0,1)","rgba(218,145,0,1)","rgba(224,135,0,1)","rgba(155,213,0,1)","rgba(201,171,0,1)","rgba(162,208,0,1)","rgba(218,146,0,1)","rgba(153,214,0,1)","rgba(190,183,0,1)","rgba(207,163,0,1)","rgba(186,187,0,1)","rgba(173,199,0,1)","rgba(192,181,0,1)","rgba(181,192,0,1)","rgba(136,224,0,1)","rgba(201,171,0,1)","rgba(222,139,0,1)","rgba(203,168,0,1)","rgba(211,157,0,1)","rgba(199,173,0,1)","rgba(188,186,0,1)","rgba(208,162,0,1)","rgba(157,212,0,1)","rgba(155,213,0,1)","rgba(188,185,0,1)","rgba(206,164,0,1)","rgba(208,161,0,1)","rgba(172,200,0,1)","rgba(195,177,0,1)","rgba(211,157,0,1)","rgba(212,155,0,1)","rgba(220,143,0,1)","rgba(226,131,0,1)","rgba(108,237,0,1)","rgba(218,147,0,1)","rgba(200,171,0,1)","rgba(163,207,0,1)","rgba(210,158,0,1)","rgba(200,172,0,1)","rgba(209,160,0,1)","rgba(187,186,0,1)","rgba(226,133,0,1)","rgba(120,232,0,1)","rgba(191,182,0,1)","rgba(190,183,0,1)","rgba(143,220,0,1)","rgba(201,170,0,1)","rgba(251,53,0,1)","rgba(222,140,0,1)","rgba(196,177,0,1)","rgba(216,150,0,1)","rgba(129,228,0,1)","rgba(189,184,0,1)","rgba(214,153,0,1)","rgba(193,180,0,1)","rgba(209,160,0,1)","rgba(201,170,0,1)","rgba(191,182,0,1)","rgba(196,177,0,1)","rgba(218,145,0,1)","rgba(222,138,0,1)","rgba(223,137,0,1)","rgba(190,183,0,1)","rgba(199,173,0,1)","rgba(147,218,0,1)","rgba(204,167,0,1)","rgba(217,148,0,1)","rgba(175,197,0,1)","rgba(204,167,0,1)","rgba(224,136,0,1)","rgba(190,183,0,1)","rgba(118,233,0,1)","rgba(220,142,0,1)","rgba(222,139,0,1)","rgba(157,211,0,1)","rgba(222,139,0,1)","rgba(188,185,0,1)","rgba(209,160,0,1)","rgba(211,157,0,1)","rgba(199,172,0,1)","rgba(193,180,0,1)","rgba(255,0,0,1)","rgba(200,172,0,1)","rgba(229,125,0,1)","rgba(212,156,0,1)","rgba(219,144,0,1)","rgba(123,230,0,1)","rgba(195,178,0,1)","rgba(204,167,0,1)","rgba(205,165,0,1)","rgba(193,179,0,1)","rgba(201,171,0,1)","rgba(215,151,0,1)","rgba(177,195,0,1)","rgba(213,155,0,1)","rgba(233,115,0,1)","rgba(212,155,0,1)"]}},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","mode":"","frame":null},{"x":[0.40000000000000002,164.59999999999999],"y":[505.92699999999996,505.92699999999996],"text":"","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[0.40000000000000002,164.59999999999999],"y":[654.19700000000012,654.19700000000012],"text":"","type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(0,0,255,1)","dash":"dash"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"y":[505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996,505.92699999999996],"text":["10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93","10th Percentile: 505.93"],"hovertext":["x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927","x: Inf<br />percentile10: 505.927"],"textfont":{"size":11.338582677165356,"color":"rgba(0,0,255,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"y":[654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012,654.19700000000012],"text":["90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2","90th Percentile: 654.2"],"hovertext":["x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197","x: Inf<br />percentile90: 654.197"],"textfont":{"size":11.338582677165356,"color":"rgba(0,0,255,1)"},"type":"scatter","mode":"text","hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null},{"x":[1],"y":[400],"name":"a6a9e335d22c8ac4385a03bfc7e7aa26","type":"scatter","mode":"markers","opacity":0,"hoverinfo":"skip","showlegend":false,"marker":{"color":[0,1],"colorscale":[[0,"#FF0000"],[0.0033444816053511024,"#FF0700"],[0.0066889632107023653,"#FE0E00"],[0.010033444816053467,"#FE1300"],[0.013377926421404731,"#FE1700"],[0.016722408026755831,"#FE1B00"],[0.020066889632107097,"#FD1E00"],[0.023411371237458199,"#FD2100"],[0.026755852842809302,"#FD2400"],[0.030100334448160564,"#FD2700"],[0.033444816053511663,"#FC2900"],[0.036789297658862928,"#FC2B00"],[0.040133779264214034,"#FC2D00"],[0.043478260869565293,"#FC3000"],[0.046822742474916398,"#FB3100"],[0.050167224080267497,"#FB3300"],[0.053511705685618763,"#FB3500"],[0.056856187290969862,"#FA3700"],[0.060200668896321127,"#FA3900"],[0.063545150501672226,"#FA3A00"],[0.066889632107023325,"#FA3C00"],[0.070234113712374591,"#F93D00"],[0.073578595317725703,"#F93F00"],[0.076923076923076955,"#F94100"],[0.080267558528428068,"#F84200"],[0.08361204013377932,"#F84300"],[0.086956521739130432,"#F84500"],[0.090301003344481531,"#F84600"],[0.093645484949832797,"#F74700"],[0.096989966555183896,"#F74900"],[0.10033444816053516,"#F74A00"],[0.10367892976588626,"#F64B00"],[0.10702341137123753,"#F64D00"],[0.11036789297658862,"#F64E00"],[0.11371237458193972,"#F54F00"],[0.11705685618729099,"#F55000"],[0.12040133779264209,"#F55100"],[0.12374581939799335,"#F55300"],[0.12709030100334445,"#F45400"],[0.13043478260869573,"#F45500"],[0.13377926421404682,"#F45600"],[0.13712374581939793,"#F35700"],[0.14046822742474918,"#F35800"],[0.14381270903010029,"#F35900"],[0.14715719063545155,"#F25A00"],[0.15050167224080266,"#F25B00"],[0.15384615384615391,"#F25C00"],[0.15719063545150502,"#F15D00"],[0.16053511705685614,"#F15E00"],[0.16387959866220739,"#F15F00"],[0.1672240802675585,"#F16000"],[0.17056856187290975,"#F06100"],[0.17391304347826086,"#F06200"],[0.17725752508361212,"#F06300"],[0.18060200668896323,"#EF6400"],[0.18394648829431431,"#EF6500"],[0.18729096989966559,"#EF6600"],[0.19063545150501668,"#EE6700"],[0.19397993311036796,"#EE6800"],[0.19732441471571904,"#EE6900"],[0.20066889632107032,"#ED6A00"],[0.20401337792642141,"#ED6B00"],[0.20735785953177252,"#ED6C00"],[0.21070234113712377,"#EC6C00"],[0.21404682274247488,"#EC6D00"],[0.21739130434782614,"#EC6E00"],[0.22073578595317725,"#EB6F00"],[0.22408026755852853,"#EB7000"],[0.22742474916387961,"#EB7100"],[0.23076923076923073,"#EA7200"],[0.23411371237458198,"#EA7300"],[0.23745819397993309,"#EA7300"],[0.24080267558528434,"#E97400"],[0.24414715719063546,"#E97500"],[0.24749163879598671,"#E87600"],[0.25083612040133779,"#E87700"],[0.2541806020066889,"#E87800"],[0.25752508361204018,"#E77800"],[0.2608695652173913,"#E77900"],[0.26421404682274252,"#E77A00"],[0.26755852842809363,"#E67B00"],[0.27090301003344491,"#E67C00"],[0.27424749163879603,"#E67C00"],[0.27759197324414714,"#E57D00"],[0.28093645484949836,"#E57E00"],[0.28428093645484948,"#E47F00"],[0.28762541806020059,"#E47F00"],[0.29096989966555187,"#E48000"],[0.29431438127090309,"#E38100"],[0.2976588628762542,"#E38200"],[0.30100334448160532,"#E38200"],[0.3043478260869566,"#E28300"],[0.30769230769230765,"#E28400"],[0.31103678929765877,"#E18500"],[0.31438127090301005,"#E18500"],[0.31772575250836133,"#E18600"],[0.32107023411371244,"#E08700"],[0.3244147157190635,"#E08800"],[0.32775919732441477,"#E08800"],[0.33110367892976589,"#DF8900"],[0.334448160535117,"#DF8A00"],[0.33779264214046822,"#DE8B00"],[0.3411371237458195,"#DE8B00"],[0.34448160535117062,"#DE8C00"],[0.34782608695652173,"#DD8D00"],[0.35117056856187295,"#DD8D00"],[0.35451505016722407,"#DC8E00"],[0.35785953177257518,"#DC8F00"],[0.36120401337792646,"#DC9000"],[0.36454849498327768,"#DB9000"],[0.36789297658862863,"#DB9100"],[0.37123745819397991,"#DA9200"],[0.37458193979933119,"#DA9200"],[0.37792642140468213,"#D99300"],[0.38127090301003336,"#D99400"],[0.38461538461538464,"#D99400"],[0.38795986622073592,"#D89500"],[0.39130434782608714,"#D89600"],[0.39464882943143809,"#D79700"],[0.39799331103678937,"#D79700"],[0.40133779264214064,"#D69800"],[0.40468227424749159,"#D69900"],[0.40802675585284282,"#D69900"],[0.41137123745819409,"#D59A00"],[0.41471571906354504,"#D59B00"],[0.41806020066889632,"#D49B00"],[0.42140468227424754,"#D49C00"],[0.42474916387959849,"#D39D00"],[0.42809364548494977,"#D39D00"],[0.43143812709030105,"#D29E00"],[0.43478260869565227,"#D29F00"],[0.43812709030100355,"#D19F00"],[0.4414715719063545,"#D1A000"],[0.44481605351170578,"#D1A000"],[0.44816053511705706,"#D0A100"],[0.45150501672240795,"#D0A200"],[0.45484949832775923,"#CFA200"],[0.45819397993311051,"#CFA300"],[0.46153846153846145,"#CEA400"],[0.46488294314381268,"#CEA400"],[0.46822742474916396,"#CDA500"],[0.4715719063545149,"#CDA600"],[0.47491638795986618,"#CCA600"],[0.47826086956521741,"#CCA700"],[0.48160535117056869,"#CBA800"],[0.48494983277591963,"#CBA800"],[0.48829431438127091,"#CAA900"],[0.49163879598662219,"#CAA900"],[0.49498327759197341,"#C9AA00"],[0.49832775919732436,"#C9AB00"],[0.50167224080267558,"#C8AB00"],[0.50501672240802686,"#C8AC00"],[0.50836120401337781,"#C7AD00"],[0.51170568561872909,"#C7AD00"],[0.51505016722408037,"#C6AE00"],[0.51839464882943131,"#C6AE00"],[0.52173913043478259,"#C5AF00"],[0.52508361204013387,"#C5B000"],[0.52842809364548504,"#C4B000"],[0.53177257525083599,"#C4B100"],[0.53511705685618727,"#C3B100"],[0.53846153846153855,"#C2B200"],[0.54180602006688983,"#C2B300"],[0.54515050167224077,"#C1B300"],[0.54849498327759205,"#C1B400"],[0.55183946488294333,"#C0B500"],[0.55518394648829428,"#C0B500"],[0.55852842809364545,"#BFB600"],[0.56187290969899673,"#BFB600"],[0.56521739130434767,"#BEB700"],[0.56856187290969895,"#BDB800"],[0.57190635451505023,"#BDB800"],[0.57525083612040118,"#BCB900"],[0.57859531772575246,"#BCB900"],[0.58193979933110374,"#BBBA00"],[0.5852842809364549,"#BBBB00"],[0.58862876254180618,"#BABB00"],[0.59197324414715713,"#B9BC00"],[0.59531772575250841,"#B9BC00"],[0.59866220735785969,"#B8BD00"],[0.60200668896321063,"#B8BE00"],[0.60535117056856191,"#B7BE00"],[0.60869565217391319,"#B6BF00"],[0.61204013377926414,"#B6BF00"],[0.61538461538461531,"#B5C000"],[0.61872909698996659,"#B4C000"],[0.62207357859531753,"#B4C100"],[0.62541806020066881,"#B3C200"],[0.62876254180602009,"#B3C200"],[0.63210702341137137,"#B2C300"],[0.63545150501672265,"#B1C300"],[0.6387959866220736,"#B1C400"],[0.64214046822742488,"#B0C500"],[0.64548494983277604,"#AFC500"],[0.64882943143812699,"#AFC600"],[0.65217391304347827,"#AEC600"],[0.65551839464882955,"#ADC700"],[0.6588628762541805,"#ADC700"],[0.66220735785953178,"#ACC800"],[0.66555183946488305,"#ABC900"],[0.668896321070234,"#AAC900"],[0.67224080267558517,"#AACA00"],[0.67558528428093645,"#A9CA00"],[0.67892976588628773,"#A8CB00"],[0.68227424749163901,"#A8CB00"],[0.68561872909698995,"#A7CC00"],[0.68896321070234123,"#A6CD00"],[0.69230769230769251,"#A5CD00"],[0.69565217391304346,"#A5CE00"],[0.69899665551839474,"#A4CE00"],[0.70234113712374591,"#A3CF00"],[0.70568561872909685,"#A2CF00"],[0.70903010033444813,"#A2D000"],[0.71237458193979941,"#A1D100"],[0.71571906354515036,"#A0D100"],[0.71906354515050164,"#9FD200"],[0.72240802675585292,"#9FD200"],[0.72575250836120386,"#9ED300"],[0.72909698996655536,"#9DD300"],[0.73244147157190631,"#9CD400"],[0.73578595317725759,"#9BD400"],[0.73913043478260887,"#9BD500"],[0.74247491638795982,"#9AD600"],[0.7458193979933111,"#99D600"],[0.74916387959866237,"#98D700"],[0.75250836120401332,"#97D700"],[0.7558528428093646,"#96D800"],[0.75919732441471577,"#95D800"],[0.76254180602006671,"#94D900"],[0.76588628762541833,"#94D900"],[0.76923076923076927,"#93DA00"],[0.77257525083612022,"#92DB00"],[0.77591973244147183,"#91DB00"],[0.77926421404682278,"#90DC00"],[0.78260869565217406,"#8FDC00"],[0.78595317725752523,"#8EDD00"],[0.78929765886287617,"#8DDD00"],[0.79264214046822745,"#8CDE00"],[0.79598662207357873,"#8BDE00"],[0.79933110367892968,"#8ADF00"],[0.80267558528428096,"#89DF00"],[0.80602006688963224,"#88E000"],[0.80936454849498318,"#87E100"],[0.81270903010033446,"#86E100"],[0.81605351170568563,"#85E200"],[0.81939799331103658,"#84E200"],[0.82274247491638819,"#83E300"],[0.82608695652173914,"#82E300"],[0.82943143812709041,"#81E400"],[0.83277591973244169,"#80E400"],[0.83612040133779264,"#7EE500"],[0.83946488294314392,"#7DE500"],[0.84280936454849509,"#7CE600"],[0.84615384615384603,"#7BE700"],[0.84949832775919731,"#7AE700"],[0.85284280936454859,"#79E800"],[0.85618729096989954,"#77E800"],[0.85953177257525082,"#76E900"],[0.8628762541806021,"#75E900"],[0.86622073578595304,"#74EA00"],[0.86956521739130455,"#72EA00"],[0.87290969899665549,"#71EB00"],[0.87625418060200677,"#70EB00"],[0.87959866220735805,"#6EEC00"],[0.882943143812709,"#6DEC00"],[0.88628762541806028,"#6BED00"],[0.88963210702341156,"#6AEE00"],[0.8929765886287625,"#68EE00"],[0.89632107023411378,"#67EF00"],[0.89966555183946495,"#65EF00"],[0.9030100334448159,"#64F000"],[0.90635451505016718,"#62F000"],[0.90969899665551845,"#61F100"],[0.9130434782608694,"#5FF100"],[0.91638795986622101,"#5DF200"],[0.91973244147157196,"#5BF200"],[0.92307692307692324,"#5AF300"],[0.92642140468227452,"#58F300"],[0.92976588628762535,"#56F400"],[0.93311036789297663,"#54F400"],[0.93645484949832791,"#52F500"],[0.93979933110367886,"#50F600"],[0.94314381270903014,"#4EF600"],[0.94648829431438142,"#4BF700"],[0.94983277591973236,"#49F700"],[0.95317725752508364,"#47F800"],[0.95652173913043481,"#44F800"],[0.95986622073578576,"#41F900"],[0.96321070234113737,"#3FF900"],[0.96655518394648832,"#3CFA00"],[0.96989966555183926,"#38FA00"],[0.97324414715719088,"#35FB00"],[0.97658862876254182,"#32FB00"],[0.9799331103678931,"#2EFC00"],[0.98327759197324438,"#29FC00"],[0.98662207357859522,"#24FD00"],[0.98996655518394649,"#1FFD00"],[0.99331103678929777,"#18FE00"],[0.99665551839464872,"#0EFE00"],[1,"#00FF00"]],"colorbar":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"thickness":23.039999999999996,"title":"Mean","titlefont":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"tickmode":"array","ticktext":["400","500","600","700"],"tickvals":[0.039791760977817968,0.32178210351591968,0.60377244605402147,0.88576278859212321],"tickfont":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"ticklen":2,"len":0.5}},"xaxis":"x","yaxis":"y","frame":null}],"layout":{"margin":{"t":43.762557077625573,"r":7.3059360730593621,"b":28.493150684931511,"l":43.105022831050235},"font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Mean Math Scores per School","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[0.40000000000000002,164.59999999999999],"tickmode":"array","ticktext":["70200001","70200002","70200003","70200004","70200005","70200006","70200007","70200008","70200009","70200010","70200011","70200012","70200013","70200014","70200015","70200016","70200017","70200018","70200019","70200020","70200021","70200022","70200023","70200024","70200025","70200026","70200027","70200028","70200029","70200030","70200031","70200032","70200033","70200034","70200035","70200036","70200037","70200038","70200039","70200040","70200041","70200042","70200043","70200044","70200045","70200046","70200047","70200048","70200049","70200050","70200051","70200052","70200053","70200054","70200055","70200056","70200057","70200058","70200059","70200060","70200061","70200062","70200063","70200064","70200065","70200066","70200067","70200068","70200069","70200070","70200071","70200072","70200073","70200074","70200075","70200076","70200077","70200078","70200079","70200080","70200081","70200082","70200083","70200084","70200085","70200086","70200087","70200088","70200089","70200090","70200091","70200092","70200093","70200094","70200095","70200096","70200097","70200098","70200099","70200100","70200101","70200102","70200103","70200104","70200105","70200106","70200107","70200108","70200109","70200110","70200111","70200112","70200113","70200114","70200115","70200116","70200117","70200118","70200119","70200120","70200121","70200122","70200123","70200124","70200125","70200126","70200127","70200128","70200129","70200130","70200131","70200132","70200133","70200134","70200135","70200136","70200137","70200138","70200139","70200140","70200141","70200142","70200143","70200144","70200145","70200146","70200147","70200148","70200149","70200151","70200152","70200153","70200154","70200155","70200156","70200157","70200158","70200159","70200160","70200161","70200162","70200163","70200164","70200165"],"tickvals":[1,2,3,3.9999999999999996,5,6,7,8,9,10,10.999999999999998,12.000000000000002,13,14,15,16,17,18,19,20,21,22,23,24,24.999999999999996,26,27.000000000000004,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44.000000000000007,45,46,47,48,49,50,50.999999999999993,52,53,54,55.000000000000007,56,57,57.999999999999993,59,60,61,62.000000000000007,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85.000000000000014,86,87,88.000000000000014,89,90,90.999999999999986,92,93,94,95,96,97,98,99.000000000000014,100,101,101.99999999999999,103,104,104.99999999999999,106,107,108,109,110.00000000000001,111,112,113.00000000000001,114,115,115.99999999999999,117,118,119,120,121,122,123,124.00000000000001,125,126,126.99999999999999,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164],"categoryorder":"array","categoryarray":["70200001","70200002","70200003","70200004","70200005","70200006","70200007","70200008","70200009","70200010","70200011","70200012","70200013","70200014","70200015","70200016","70200017","70200018","70200019","70200020","70200021","70200022","70200023","70200024","70200025","70200026","70200027","70200028","70200029","70200030","70200031","70200032","70200033","70200034","70200035","70200036","70200037","70200038","70200039","70200040","70200041","70200042","70200043","70200044","70200045","70200046","70200047","70200048","70200049","70200050","70200051","70200052","70200053","70200054","70200055","70200056","70200057","70200058","70200059","70200060","70200061","70200062","70200063","70200064","70200065","70200066","70200067","70200068","70200069","70200070","70200071","70200072","70200073","70200074","70200075","70200076","70200077","70200078","70200079","70200080","70200081","70200082","70200083","70200084","70200085","70200086","70200087","70200088","70200089","70200090","70200091","70200092","70200093","70200094","70200095","70200096","70200097","70200098","70200099","70200100","70200101","70200102","70200103","70200104","70200105","70200106","70200107","70200108","70200109","70200110","70200111","70200112","70200113","70200114","70200115","70200116","70200117","70200118","70200119","70200120","70200121","70200122","70200123","70200124","70200125","70200126","70200127","70200128","70200129","70200130","70200131","70200132","70200133","70200134","70200135","70200136","70200137","70200138","70200139","70200140","70200141","70200142","70200143","70200144","70200145","70200146","70200147","70200148","70200149","70200151","70200152","70200153","70200154","70200155","70200156","70200157","70200158","70200159","70200160","70200161","70200162","70200163","70200164","70200165"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":false,"tickfont":{"color":null,"family":null,"size":0},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"y","title":{"text":"School ID","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[355.608,770.79199999999992],"tickmode":"array","ticktext":["400","500","600","700"],"tickvals":[400,500,600,700],"categoryorder":"array","categoryarray":["400","500","600","700"],"nticks":null,"ticks":"","tickcolor":null,"ticklen":3.6529680365296811,"tickwidth":0,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":false,"gridcolor":null,"gridwidth":0,"zeroline":false,"anchor":"x","title":{"text":"Mean Math Scores","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":null,"bordercolor":null,"borderwidth":0,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498},"title":{"text":"Mean","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"16e478dd3764":{"x":{},"y":{},"colour":{},"type":"scatter"},"16e4410f5fb":{"x":{},"y":{},"label":{}},"16e43c5d48f6":{"x":{},"y":{},"label":{}},"16e41662d29":{"yintercept":{}},"16e4219d7813":{"yintercept":{}},"16e47eaa3cae":{"x":{},"y":{},"label":{}},"16e47e3b33f7":{"x":{},"y":{},"label":{}}},"cur_data":"16e478dd3764","visdat":{"16e478dd3764":["function (y) ","x"],"16e4410f5fb":["function (y) ","x"],"16e43c5d48f6":["function (y) ","x"],"16e41662d29":["function (y) ","x"],"16e4219d7813":["function (y) ","x"],"16e47eaa3cae":["function (y) ","x"],"16e47e3b33f7":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Some of the previous annotations generated in the static plot may not appear after turning it into an interactive plot. Hence, we can use both static and interactive plots together if needed. For example, static charts to quickly summarize and communicate information to reader, and an interactive plot for readers to drill down in more detail, eg use of zoom, identifying specific data points via tooltip etc.</p>
</div>
</div>
</section>
</section>
<section id="distribution-of-students-performance-in-math-science-and-reading-by-gender" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="distribution-of-students-performance-in-math-science-and-reading-by-gender">3.3 Distribution of students’ performance in Math, Science and Reading by gender</h2>
<p>The author had used the <a href="https://www.rdocumentation.org/packages/intsvy/versions/2.8/topics/pisa.mean.pv"><code>pisa.mean.pv</code></a> function from <a href="https://daniel-caro.com/r-intsvy"><code>intsvy</code></a> package to obtain the Mean and Standard Deviation of PV values from “PV1MATH” to “PV10MATH”, “PV1READ” to “PV10READ” and “PV1SCIE” to “PV10SCIE” for each gender.</p>
<p>The code below was used to generate the composite PV values for Math, Reading and Science by gender.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>pvmathgenderonly <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"MATH"</span>),<span class="fu">c</span>(<span class="st">"ST004D01T"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvmath_bygenderonly"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>pvreadgenderonly <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"READ"</span>),<span class="fu">c</span>(<span class="st">"ST004D01T"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvread_bygenderonly"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>pvsciegenderonly <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"SCIE"</span>),<span class="fu">c</span>(<span class="st">"ST004D01T"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvscie_bygenderonly"</span>,<span class="at">folder=</span>data_folder_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>A plot to display the distribution of Math, Reading and Science scores by gender was generated using the code below.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">The Original plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">The code</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p><img src="images/clipboard-3304529458.png" class="img-fluid"></p>
<p>The author had created a series of error bars across the 3 subjects to represent the subject scores by gender.</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pvmathgenderonly, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(ST004D01T), <span class="at">y =</span> Mean,<span class="at">fill=</span>ST004D01T)) <span class="sc">+</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>),<span class="at">lwd=</span><span class="fl">0.5</span>,<span class="at">show.legend=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> mean,</span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">18</span>,</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">5</span>,</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">colour=</span>ST004D01T),</span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD,<span class="at">color=</span>ST004D01T),</span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.5</span>,</span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="fl">0.8</span>,</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>)</span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Math Scores by Gender"</span>) <span class="sc">+</span></span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Math Score"</span>) <span class="sc">+</span></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Gender"</span>)<span class="sc">+</span></span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>), <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="at">by =</span> <span class="dv">100</span>))<span class="sc">+</span></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_discrete</span>(<span class="at">name =</span> <span class="st">"Gender"</span>) <span class="sc">+</span></span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_discrete</span>(<span class="at">name =</span> <span class="st">"Gender"</span>) <span class="sc">+</span></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_gray</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="evaluation-2" class="level3">
<h3 class="anchored" data-anchor-id="evaluation-2">3.3.1 Evaluation</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 5%">
<col style="width: 48%">
<col style="width: 46%">
</colgroup>
<thead>
<tr class="header">
<th>Assessment Criteria</th>
<th>Critique/Feedback</th>
<th>Possible Improvements</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Clarity</strong></td>
<td><ol type="1">
<li><p>Although the original plot enables me to see the differences in scores between the genders, I am unclear as to which score this is showing. Is it showing the range of PV1 scores or average of PV values?</p></li>
<li><p>Graph is titled as “Subject Scores by Gender”, however the code indicates that mean scores +/- one standard deviation were generated instead.</p></li>
<li><p>The data subset used for the plot only has 2 observations and 6 variables. Upon inspecting the data set, this subset is actually the composite mean score for each gender across the subjects.</p></li>
</ol></td>
<td><ol type="1">
<li><p>The code and subset used is not suitable to plot a range of scores for each gender across subjects.</p></li>
<li><p>I will extract a new subset with all PV1 scores at the individual student level. This will then be used to plot the distribution and range of scores for the different genders across all subjects.</p></li>
</ol></td>
</tr>
<tr class="even">
<td><strong>Aesthetics</strong></td>
<td><ol type="1">
<li><p>The graphs are already well labelled in the x and y axes, and identifies the different genders clearly. The use of different colors per gender together with the legend is not necessary.</p></li>
<li><p>The scale for the X-axis is from 0 to 1000, in increments of 50. Because of the “shortness” of the error bars, the graph appears too elongated.</p></li>
<li><p>Unable to decipher the actual scores even with the granularity in X-axis tick marks.</p></li>
</ol></td>
<td><ol type="1">
<li><p>To remove the legend since there are only two categories of gender and they are already differentiated by colour.</p></li>
<li><p>Shorten the X-axis, or extract new data points to correctly populate the range of scores.</p></li>
<li><p>To annotate the mean scores onto the plot, so that we can remove the background grid lines and X-axis tick marks and reduce non-data ink.</p></li>
<li><p>The new visualization will need to enable readers to quickly differentiate the performance between genders across subjects.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Observation
</div>
</div>
<div class="callout-body-container callout-body">
<p>upon closer examination of the code below, the author had included an error bar with Mean +/- one standard deviation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="co">#geom_errorbar(</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#aes(ymin = Mean - SD, ymax = Mean + SD,color=ST004D01T),</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#width = 0.5,</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">#size=0.8,</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#position = position_dodge(width = 0.5)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The original data set and plot is instead comparing the mean subject scores across different genders.</p>
</div>
</div>
<p>Examining the subset used for the original plot in more detail.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pvmathgenderonly)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ST004D01T Freq   Mean s.e.     SD  s.e
1    Female 3227 569.01 1.70  97.49 1.14
2      Male 3332 581.30 1.74 107.09 1.36</code></pre>
</div>
</div>
<p>The <em>pvmathgenderonly</em> data set only has 2 observations and 6 variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conclusion
</div>
</div>
<div class="callout-body-container callout-body">
<p>This data set can only be used to compare the overall mean scores for genders across the 3 subjects.</p>
<p>The visualization needs to be done differently to enable the reader to obtain more information regarding the performance between genders.</p>
<p>I will extract a new subset and create new graphs to show the range and distribution of scores between the genders across subjects.</p>
<p>I will use PV1 scores which are available for all students to create new plots to visualize the distribution of scores.</p>
</div>
</div>
</section>
<section id="sketch-of-proposed-design-2" class="level3">
<h3 class="anchored" data-anchor-id="sketch-of-proposed-design-2">3.3.2 Sketch of Proposed Design</h3>
<p>Rough sketch of proposed design is shown below.</p>
<p><img src="images/clipboard-800776571.png" class="img-fluid"></p>
</section>
<section id="remake-2" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="remake-2">3.3.3 Remake</h3>
<p>The original data subset and plot is unable to exhibit the range and distribution of subject scores across genders, due to the lack of scores at an individual student level.</p>
<p>Therefore, I will extract data from the original data set to create new subsets for the new plots using the code below.</p>
<p>In terms of data, I will use the PV1 scores which are available for all students.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a subset of the data with gender and PV1 score columns</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>subset_gender_PV1 <span class="ot">&lt;-</span> stu_qqq_SG <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ST004D01T, PV1MATH, PV1SCIE, PV1READ)</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert the "ST004D01T" column to a factor </span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>subset_gender_PV1<span class="sc">$</span>ST004D01T <span class="ot">&lt;-</span> <span class="fu">factor</span>(subset_gender_PV1<span class="sc">$</span>ST004D01T, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Female"</span>, <span class="st">"Male"</span>))</span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>Math_gender <span class="ot">&lt;-</span> subset_gender_PV1 <span class="sc">%&gt;%</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ST004D01T) <span class="sc">%&gt;%</span>  <span class="co"># Group by gender column</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">Freq =</span> <span class="fu">n</span>(),             <span class="co"># Count the frequency of each gender</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># Calculate the mean of PV1MATH, removing NA values</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>Read_gender <span class="ot">&lt;-</span> subset_gender_PV1 <span class="sc">%&gt;%</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ST004D01T) <span class="sc">%&gt;%</span>  <span class="co"># Group by gender column</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">Freq =</span> <span class="fu">n</span>(),             <span class="co"># Count the frequency of each gender</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(PV1READ, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># Calculate the mean of PV1READ, removing NA values</span></span>
<span id="cb28-20"><a href="#cb28-20" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-21"><a href="#cb28-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-22"><a href="#cb28-22" aria-hidden="true" tabindex="-1"></a>SCIE_gender <span class="ot">&lt;-</span> subset_gender_PV1 <span class="sc">%&gt;%</span></span>
<span id="cb28-23"><a href="#cb28-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ST004D01T) <span class="sc">%&gt;%</span>  <span class="co"># Group by gender column</span></span>
<span id="cb28-24"><a href="#cb28-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb28-25"><a href="#cb28-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">Freq =</span> <span class="fu">n</span>(),             <span class="co"># Count the frequency of each gender</span></span>
<span id="cb28-26"><a href="#cb28-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">Mean =</span> <span class="fu">mean</span>(PV1SCIE, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)  <span class="co"># Calculate the mean of PV1SCIE, removing NA values</span></span>
<span id="cb28-27"><a href="#cb28-27" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next, I will use the code below to create new box plots for each subject. This will show the range of scores for the genders in different subjects.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create the plot using the subset_data</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>bxp1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(subset_gender_PV1, <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> PV1MATH, <span class="at">fill =</span> ST004D01T)) <span class="sc">+</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> Math_gender, <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> Mean), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> Math_gender, </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> Mean, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Mean:"</span>, <span class="fu">round</span>(Mean, <span class="dv">2</span>))), </span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">vjust =</span><span class="dv">4</span>, <span class="at">size =</span> <span class="fl">2.75</span>) <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Gender"</span>,</span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Math Scores"</span>) <span class="sc">+</span></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"Female"</span> <span class="ot">=</span> <span class="st">"lightblue"</span>, <span class="st">"Male"</span> <span class="ot">=</span> <span class="st">"lightblue"</span>)) <span class="sc">+</span>  </span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) </span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>bxp2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(subset_gender_PV1, <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> PV1READ, <span class="at">fill =</span> ST004D01T)) <span class="sc">+</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> Read_gender, <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> Mean), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> Math_gender, </span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> Mean, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Mean:"</span>, <span class="fu">round</span>(Mean, <span class="dv">2</span>))), </span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">vjust =</span> <span class="fl">4.25</span>, <span class="at">size =</span> <span class="fl">2.75</span>) <span class="sc">+</span></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Gender"</span>,</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Reading Scores"</span>) <span class="sc">+</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"lightgreen"</span>, <span class="st">"lightgreen"</span>)) <span class="sc">+</span>  <span class="co"># Associate colors with factor levels</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) </span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>bxp3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(subset_gender_PV1, <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> PV1SCIE, <span class="at">fill =</span> ST004D01T)) <span class="sc">+</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">ylim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">data =</span> SCIE_gender, <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> Mean), <span class="at">color =</span> <span class="st">"blue"</span>, <span class="at">size =</span> <span class="fl">1.5</span>) <span class="sc">+</span></span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">data =</span> Math_gender, </span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a>          <span class="fu">aes</span>(<span class="at">x =</span> ST004D01T, <span class="at">y =</span> Mean, <span class="at">label =</span> <span class="fu">paste</span>(<span class="st">"Mean:"</span>, <span class="fu">round</span>(Mean, <span class="dv">2</span>))), </span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a>          <span class="at">color =</span> <span class="st">"black"</span>, <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>, <span class="at">vjust =</span> <span class="dv">4</span>, <span class="at">size =</span> <span class="fl">2.75</span>) <span class="sc">+</span></span>
<span id="cb29-37"><a href="#cb29-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Gender"</span>,</span>
<span id="cb29-38"><a href="#cb29-38" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Science Scores"</span>) <span class="sc">+</span></span>
<span id="cb29-39"><a href="#cb29-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="st">"lightpink"</span>, <span class="st">"lightpink"</span>)) <span class="sc">+</span>  <span class="co"># Associate colors with factor levels</span></span>
<span id="cb29-40"><a href="#cb29-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb29-41"><a href="#cb29-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Besides showing the differences in scores through box plots, I will also plot ridgeline plots, segmented into 4 quantiles, to display the distribution and difference in subject scores between genders across the subjects.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>rp1 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(subset_gender_PV1,</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> PV1MATH, </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> ST004D01T, </span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="fu">factor</span>(<span class="fu">stat</span>(quantile))</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>           )) <span class="sc">+</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density_ridges</span>(</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"density_ridges_gradient"</span>,</span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">calc_ecdf =</span> <span class="cn">TRUE</span>, </span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="dv">4</span>,</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">name =</span> <span class="st">"Quartiles"</span>) <span class="sc">+</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">name =</span> <span class="cn">NULL</span>, <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">2.6</span>))) <span class="sc">+</span></span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span></span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)  </span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span></span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Math Scores</span><span class="sc">\n</span><span class="st">across genders"</span>)</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a>rp2 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(subset_gender_PV1,</span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> PV1READ, </span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> ST004D01T, </span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="fu">factor</span>(<span class="fu">stat</span>(quantile))</span>
<span id="cb30-27"><a href="#cb30-27" aria-hidden="true" tabindex="-1"></a>           )) <span class="sc">+</span></span>
<span id="cb30-28"><a href="#cb30-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density_ridges</span>(</span>
<span id="cb30-29"><a href="#cb30-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"density_ridges_gradient"</span>,</span>
<span id="cb30-30"><a href="#cb30-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">calc_ecdf =</span> <span class="cn">TRUE</span>, </span>
<span id="cb30-31"><a href="#cb30-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="dv">4</span>,</span>
<span id="cb30-32"><a href="#cb30-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb30-33"><a href="#cb30-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">name =</span> <span class="st">"Quartiles"</span>) <span class="sc">+</span></span>
<span id="cb30-34"><a href="#cb30-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb30-35"><a href="#cb30-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb30-36"><a href="#cb30-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb30-37"><a href="#cb30-37" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb30-38"><a href="#cb30-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">name =</span> <span class="cn">NULL</span>, <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">2.6</span>))) <span class="sc">+</span></span>
<span id="cb30-39"><a href="#cb30-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span></span>
<span id="cb30-40"><a href="#cb30-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb30-41"><a href="#cb30-41" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)  </span>
<span id="cb30-42"><a href="#cb30-42" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span></span>
<span id="cb30-43"><a href="#cb30-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Reading Scores </span><span class="sc">\n</span><span class="st">across genders"</span>)</span>
<span id="cb30-44"><a href="#cb30-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-45"><a href="#cb30-45" aria-hidden="true" tabindex="-1"></a>rp3 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(subset_gender_PV1,</span>
<span id="cb30-46"><a href="#cb30-46" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> PV1SCIE, </span>
<span id="cb30-47"><a href="#cb30-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> ST004D01T, </span>
<span id="cb30-48"><a href="#cb30-48" aria-hidden="true" tabindex="-1"></a>           <span class="at">fill =</span> <span class="fu">factor</span>(<span class="fu">stat</span>(quantile))</span>
<span id="cb30-49"><a href="#cb30-49" aria-hidden="true" tabindex="-1"></a>           )) <span class="sc">+</span></span>
<span id="cb30-50"><a href="#cb30-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density_ridges</span>(</span>
<span id="cb30-51"><a href="#cb30-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"density_ridges_gradient"</span>,</span>
<span id="cb30-52"><a href="#cb30-52" aria-hidden="true" tabindex="-1"></a>    <span class="at">calc_ecdf =</span> <span class="cn">TRUE</span>, </span>
<span id="cb30-53"><a href="#cb30-53" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="dv">4</span>,</span>
<span id="cb30-54"><a href="#cb30-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-55"><a href="#cb30-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">alpha =</span> <span class="fl">0.5</span> ) <span class="sc">+</span></span>
<span id="cb30-56"><a href="#cb30-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis_d</span>(<span class="at">name =</span> <span class="st">"Quartiles"</span>) <span class="sc">+</span></span>
<span id="cb30-57"><a href="#cb30-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(</span>
<span id="cb30-58"><a href="#cb30-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="cn">NULL</span>,</span>
<span id="cb30-59"><a href="#cb30-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb30-60"><a href="#cb30-60" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">+</span></span>
<span id="cb30-61"><a href="#cb30-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_discrete</span>(<span class="at">name =</span> <span class="cn">NULL</span>, <span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add =</span> <span class="fu">c</span>(<span class="fl">0.2</span>, <span class="fl">2.6</span>))) <span class="sc">+</span></span>
<span id="cb30-62"><a href="#cb30-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span></span>
<span id="cb30-63"><a href="#cb30-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb30-64"><a href="#cb30-64" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">10</span>)  </span>
<span id="cb30-65"><a href="#cb30-65" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb30-66"><a href="#cb30-66" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Science Scores</span><span class="sc">\n</span><span class="st">across genders"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>I will use the code below to create a composite graph.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>patch3 <span class="ot">&lt;-</span> (rp1<span class="sc">+</span> bxp1)<span class="sc">/</span>(rp2<span class="sc">+</span>bxp2)<span class="sc">/</span>(rp3<span class="sc">+</span>bxp3) <span class="sc">+</span> </span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>              <span class="fu">plot_annotation</span>(</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">title =</span> <span class="st">"Male students outperform in Maths and Science"</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">subtitle =</span> <span class="st">"Female students outperform in Reading"</span>)</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>patch3 <span class="sc">&amp;</span> <span class="fu">theme</span>(<span class="at">panel.grid.major =</span> <span class="fu">element_blank</span>(),)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="R_Ex3_files/figure-html/unnamed-chunk-27-1.png" class="img-fluid figure-img column-body-outset-right" width="768"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Revised Plot
</div>
</div>
<div class="callout-body-container callout-body">
<p>The revised plot consists of a patchwork of ridgeline plots and box plots for each subject.</p>
<p>The ridgeline plot been further segmented into 4 quantiles, differentiated by colour. This not only provides insights into the distribution of the scores but also enables readers to quickly understand the differences in performance between genders.</p>
<p>The box plots, further help readers to understand the differences in scores between genders. The range of scores can be seen along with the mean scores.</p>
</div>
</div>
</section>
</section>
<section id="distribution-of-math-reading-and-science-scores-by-socioeconomic-status" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="distribution-of-math-reading-and-science-scores-by-socioeconomic-status">3.4 Distribution of Math, Reading and Science scores by socioeconomic status</h2>
<p>The author had previously created a new variable, “ESCS_recoded”, which bins the socio-economic (ESCS) score into four quantiles - “Very Low”, “Low”, “Medium” and “High”. The author had used the <a href="https://www.rdocumentation.org/packages/intsvy/versions/2.8/topics/pisa.mean.pv"><code>pisa.mean.pv</code></a> function from <a href="https://daniel-caro.com/r-intsvy"><code>intsvy</code></a><code>package</code> to obtain the Mean and Standard Deviation of PV values from “PV1MATH” to “PV10MATH”, “PV1READ” to “PV10READ” and “PV1SCIE” to “PV10SCIE” and grouped by the ESCS score.</p>
<p>The code below was used to generate the composite PV values for Math, Reading and Science.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>pvmathescs <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"MATH"</span>),<span class="fu">c</span>(<span class="st">"ESCS_recoded"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvmathescs"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>pvreadescs <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"READ"</span>),<span class="fu">c</span>(<span class="st">"ESCS_recoded"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvreadescs"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>pvscieescs <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"SCIE"</span>),<span class="fu">c</span>(<span class="st">"ESCS_recoded"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvscieescs"</span>,<span class="at">folder=</span>data_folder_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>A plot to display the distribution of Math, Reading and Science scores across schools by socioeconomic status was generated using the code below.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">The Original plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">The code</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p><img src="images/clipboard-1075189504.png" class="img-fluid"></p>
<p>The author had created a series of error bars to represent the scores across the 4 categories of the ESCS score (High, Medium, Low, Very Low).</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pvscieescs, <span class="fu">aes</span>(<span class="at">x =</span> ESCS_recoded, <span class="at">y =</span> Mean,<span class="at">fill=</span>ESCS_recoded))<span class="sc">+</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>),<span class="at">lwd=</span><span class="fl">0.5</span>,<span class="at">show.legend=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> mean,</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">10</span>,</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">2</span>,</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">colour=</span>ESCS_recoded),</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD,<span class="at">color=</span>ESCS_recoded),</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="fl">0.5</span>,</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">1</span>,</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>)</span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Science Scores by Socioeconomic Status"</span>) <span class="sc">+</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Science Score"</span>) <span class="sc">+</span></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Socioeconomic Status"</span>)<span class="sc">+</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1000</span>),<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="at">by=</span><span class="dv">200</span>))<span class="sc">+</span></span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size=</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="evaluation-3" class="level3">
<h3 class="anchored" data-anchor-id="evaluation-3">3.4.1 Evaluation</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 45%">
<col style="width: 49%">
</colgroup>
<thead>
<tr class="header">
<th>Assessment Criteria</th>
<th>Critique/Feedback</th>
<th>Possible Improvements</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Clarity</strong></td>
<td><ol type="1">
<li><p>Although the original plot enables me to visualize the differences in scores between the ESCS categories, I am unclear as to which score this is showing. Is it showing me the range of PV1 scores or average of PV values?</p></li>
<li><p>Graph is titled as “Subject Scores by Socioeconomic Status”, however the code indicates that mean scores +/- one standard deviation were generated instead.</p></li>
<li><p>The data subset used for the plots only has 4 observations and 6 variables. Upon inspecting the data set, this is actually just the overall mean scores for each of the newly binned ESCS score category.</p></li>
</ol></td>
<td><ol type="1">
<li><p>The code and subset used is not suitable to plot a range or distribution of scores for each ESCS score category.</p></li>
<li><p>I will extract a new subset with all PV1 scores at the individual student level together with ESCS scores per student. I will then plot the relationship between the two continuous variables (subject scores and ESCS score) via scatter plots.</p></li>
<li><p>A scatter plots will enable readers to quickly infer the relationships between subject scores and socioeconomic statuses.</p></li>
</ol></td>
</tr>
<tr class="even">
<td><strong>Aesthetics</strong></td>
<td><ol type="1">
<li><p>The Y-axis is already well labelled and identifies the different socioeconomic segments clearly, the use of different colors per segment together with legend is not necessary.</p></li>
<li><p>The scale for the X-axis is from 0 to 1000, in increments of 50. Because of the “shortness” of the error bars, the graph appears too elongated.</p></li>
<li><p>Even with the background grid lines and X axis tick marks, I am unable to decipher the actual scores clearly.</p></li>
</ol></td>
<td><ol type="1">
<li><p>To remove the legend since the ESCS segments are already differentiated by colour and identifiable through the Y-axis labels.</p></li>
<li><p>Shorten the X-axis, or extract new data points to correctly populate the range of scores.</p></li>
<li><p>To annotate the mean scores onto the plot, so that we can remove the background grid lines and X-axis tick marks and reduce non-data ink.</p></li>
</ol></td>
</tr>
</tbody>
</table>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Observation
</div>
</div>
<div class="callout-body-container callout-body">
<p>Upon closer examination of the code below, the author had included an error bar with Mean +/- one standard deviation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="co">#geom_errorbar(</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">#aes(ymin = Mean - SD, ymax = Mean + SD,color=ESCS_recoded),</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">#width = 0.5,</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">#size=1,</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">#position = position_dodge(width = 0.5)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Hence the original plot can only be used to compare the mean subject scores across different ESCS segments.</p>
</div>
</div>
<p>Examining the subset used for the original plot in more detail.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(pvscieescs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ESCS_recoded Freq   Mean s.e.    SD  s.e
1     Very Low 1640 503.73 3.14 97.91 1.97
2          Low 1640 546.33 2.61 93.23 1.75
3       Medium 1640 584.61 2.31 86.07 2.04
4         High 1639 610.62 3.23 84.01 2.21</code></pre>
</div>
</div>
<p>The data subset used for the plots only has 4 observations and 6 variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conclusion
</div>
</div>
<div class="callout-body-container callout-body">
<p>This subset and the code used is not able to plot the range of scores per ESCS segment, and can only be used to compare the composite mean scores of each of the 4 ESCS segments.</p>
<p>Although it is useful to compare the mean scores between different ESCS segments, a different set of data and plots can be used instead to communicate more information about the strength or weakness of the relationship between subject scores and socioeconomic statuses.</p>
</div>
</div>
<p>Additionally, the <strong>binning</strong> of the ESCS score, while helpful may be limited in usefulness, for the following reasons:-</p>
<ul>
<li><p>Binning the ESCS scores adds in an element of subjectivity. For example, why should there be 4 segments of socioeconomic statuses instead of 3, or 6?</p></li>
<li><p>Could the number of socioeconomic segments be applicable for other countries? For example, would a “Low segment” in Singapore be equivalent to a “Low segment” in another country?</p></li>
</ul>
</section>
<section id="sketch-of-proposed-design-3" class="level3">
<h3 class="anchored" data-anchor-id="sketch-of-proposed-design-3">3.4.2 Sketch of Proposed Design</h3>
<p>Rough sketch of proposed design is shown below.</p>
<p><img src="images/clipboard-3423147912.png" class="img-fluid"></p>
</section>
<section id="remake-3" class="level3 page-columns page-full">
<h3 class="anchored" data-anchor-id="remake-3">3.4.4 Remake</h3>
<p>Instead of binning the ESCS score and transforming it to a categorical type, I will keep the ESCS score as a continuous variable.</p>
<p>I will use scatter plots to visualize the strength or weaknesses of the relationships between the socioeconomic statuses and subject scores.</p>
<p>Drawing inspiration from Prof Kam’s <a href="https://isss608-ay2023-24jan.netlify.app/outline/lesson03_outline">Lesson 3</a> and well as additional useful references, I will proceed to plot <a href="https://things-about-r.tumblr.com/post/124004085689/scatter-plots-with-marginal-densities-an-example">Scatter plots with Marginal Histograms.</a></p>
<p>In terms of data, I will use the PV1 scores which at the individual student level.</p>
<p>For this visualization, I will use the <a href="https://cran.r-project.org/web/packages/ggstatsplot/index.html">ggstatplot package</a>. <span class="citation" data-cites="patil2021">(<a href="#ref-patil2021" role="doc-biblioref">Patil 2021</a>)</span></p>
<p>For more information on this package and how it can be used to create graphics from statistical tests included in the plots themselves, please <a href="https://joss.theoj.org/papers/10.21105/joss.03167">refer to this link.</a></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggstatsplot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Creating new data subset for visualization.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>subset_ESCS_PV1 <span class="ot">&lt;-</span> stu_qqq_SG <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ESCS, PV1MATH, PV1SCIE, PV1READ)</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="co">#omiting NA values</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a>subset_ESCS_PV1 <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(subset_ESCS_PV1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>We will use the code below from <code>ggstatplot package</code> to generate the plot.</p>
<div class="cell page-columns page-full">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggscatterstats</span>(</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> subset_ESCS_PV1,                                          </span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">x =</span> ESCS,                                                  </span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">y =</span> PV1MATH,</span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">xlab =</span> <span class="st">"Socioeconomic score (ESCS)"</span>,</span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">ylab =</span> <span class="st">"Math scores"</span>,</span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">marginal =</span> <span class="cn">TRUE</span>,</span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">marginal.type =</span> <span class="st">"histogram"</span>,</span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">centrality.para =</span> <span class="st">"mean"</span>,</span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">margins =</span> <span class="st">"both"</span>,</span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">title =</span> <span class="st">"Relationship between Socio-economic and Math scores"</span>,</span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">messages =</span> <span class="cn">FALSE</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display page-columns page-full">
<div class="page-columns page-full">
<figure class="figure page-columns page-full">
<p class="page-columns page-full"><img src="R_Ex3_files/figure-html/unnamed-chunk-34-1.png" class="img-fluid figure-img column-body-outset-right" width="768"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Revised Plot
</div>
</div>
<div class="callout-body-container callout-body">
<p>The benefit of this plot is that it shows both the correlation between the two continous variables as well as their respective distributions, and includes important statistics like the Pearson coefficient.</p>
<p>From the plot above, the pearson coefficient of 0.42 indicates that there is a weak positive relationship between ESCS scores and Math scores.</p>
<p>The marginal histograms for both variables also enables readers to additionally infer the distribution of these variables. For example, Math scores resemble a normal distribution, while ESCS scores resemble a left-skewed distribution.</p>
</div>
</div>
</section>
</section>
<section id="distribution-of-students-performance-in-math-science-and-reading-by-gender-across-schools" class="level2">
<h2 class="anchored" data-anchor-id="distribution-of-students-performance-in-math-science-and-reading-by-gender-across-schools">3.5 Distribution of students’ performance in Math, Science and Reading by gender across schools</h2>
<p>The author had intended to analyse whether there are differences in performances in Math, Reading and Science between genders at a more granular level - within schools.</p>
<p>The author had used the <a href="https://www.rdocumentation.org/packages/intsvy/versions/2.8/topics/pisa.mean.pv"><code>pisa.mean.pv</code></a> function from <a href="https://daniel-caro.com/r-intsvy"><code>intsvy</code></a><code>package</code> to obtain the Mean and Standard Deviation of PV values from “PV1MATH” to “PV10MATH”, “PV1READ” to “PV10READ” and “PV1SCIE” to “PV10SCIE” for each school and by gender.</p>
<p>The below code was used to generate the composite PV values.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>pvmathgender <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"MATH"</span>),<span class="fu">c</span>(<span class="st">"CNTSCHID"</span>,<span class="st">"ST004D01T"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvmath_bygender"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>pvreadgender <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"READ"</span>),<span class="fu">c</span>(<span class="st">"CNTSCHID"</span>,<span class="st">"ST004D01T"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvread_bygender"</span>,<span class="at">folder=</span>data_folder_path)</span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>pvsciegender <span class="ot">&lt;-</span> <span class="fu">pisa.mean.pv</span>(<span class="at">pvlabel=</span><span class="fu">paste0</span>(<span class="st">"PV"</span>,<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>,<span class="st">"SCIE"</span>),<span class="at">by=</span> <span class="fu">c</span>(<span class="st">"CNTSCHID"</span>,<span class="st">"ST004D01T"</span>), <span class="at">data=</span>stu_qqq_SG_clean,<span class="at">export=</span><span class="cn">FALSE</span>,<span class="at">name=</span><span class="st">"pvscie_bygender"</span>,<span class="at">folder=</span>data_folder_path)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>A plot to display the distribution of Math, Reading and Science scores across schools by gender, was generated using the code below.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">The Original Plot</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">The code</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<p><img src="images/clipboard-2922052911.png" class="img-fluid"></p>
<p>The author had created a series of 2 error bars for each school ID across the 3 subjects to represent the subject scores for each gender for all schools (164 schools).</p>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>p8<span class="ot">&lt;-</span> <span class="fu">ggplot</span>(pvmathgender, <span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">as.factor</span>(CNTSCHID), <span class="at">y =</span> Mean,<span class="at">fill=</span>ST004D01T))<span class="sc">+</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>(<span class="at">width =</span> <span class="fl">0.5</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>),<span class="at">lwd=</span><span class="fl">1.5</span>,<span class="at">show.legend=</span><span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(</span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">fun =</span> mean,</span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"point"</span>,</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">shape =</span> <span class="dv">18</span>,</span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">size =</span> <span class="dv">10</span>,</span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">colour=</span>ST004D01T),</span>
<span id="cb41-9"><a href="#cb41-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.75</span>)) <span class="sc">+</span></span>
<span id="cb41-10"><a href="#cb41-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(</span>
<span id="cb41-11"><a href="#cb41-11" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">ymin =</span> Mean <span class="sc">-</span> SD, <span class="at">ymax =</span> Mean <span class="sc">+</span> SD,<span class="at">color=</span>ST004D01T),</span>
<span id="cb41-12"><a href="#cb41-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">width =</span> <span class="dv">1</span>,</span>
<span id="cb41-13"><a href="#cb41-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">size=</span><span class="dv">2</span>,</span>
<span id="cb41-14"><a href="#cb41-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.5</span>)</span>
<span id="cb41-15"><a href="#cb41-15" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb41-16"><a href="#cb41-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Math Scores by Gender across Schools"</span>) <span class="sc">+</span></span>
<span id="cb41-17"><a href="#cb41-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Math Score"</span>) <span class="sc">+</span></span>
<span id="cb41-18"><a href="#cb41-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"School ID"</span>)<span class="sc">+</span></span>
<span id="cb41-19"><a href="#cb41-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1000</span>),<span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="dv">1000</span>, <span class="at">by=</span><span class="dv">200</span>))<span class="sc">+</span></span>
<span id="cb41-20"><a href="#cb41-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb41-21"><a href="#cb41-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>(<span class="at">base_size=</span><span class="dv">50</span>)<span class="sc">+</span></span>
<span id="cb41-22"><a href="#cb41-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position=</span><span class="st">"none"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<section id="evaluation-4" class="level3">
<h3 class="anchored" data-anchor-id="evaluation-4">3.5.1 Evaluation</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 4%">
<col style="width: 53%">
<col style="width: 42%">
</colgroup>
<thead>
<tr class="header">
<th>Assessment Criteria</th>
<th>Critique/Feedback</th>
<th>Possible Improvements</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><strong>Clarity</strong></td>
<td><ol type="1">
<li><p>Although the original plot enables me to visualize the differences in scores across schools, I am unclear as to which score this is showing. Is it showing me the range of gender scores by school ID?</p></li>
<li><p>Graph is titled as “Subject Scores by Gender across school”, however the code indicates that mean scores +/- one standard deviation were generated instead.</p></li>
<li><p>The data subset used for this visualization has 301 observations and 7 variables. Upon inspecting the data set, it is basically the overall mean subject scores for male and female students per school</p></li>
</ol></td>
<td><ol type="1">
<li><p>Previous visualization had already analysed the differences per school. To further make it more granular by introducing gender, does not seem to add further value in terms of insights.</p></li>
<li><p>We can retain the original intent to show the granular difference in performance for the schools, by examining the actual disparity between the best and the worst schools instead.</p></li>
</ol></td>
</tr>
<tr class="even">
<td><strong>Aesthetics</strong></td>
<td><ol type="1">
<li><p>The use of a vertically long plot to compare the scores across schools makes it visually challenging and difficult to spot differences between schools, and identify any clusters.</p></li>
<li><p>Since there are 164 schools, the use of a vertically long format makes it difficult to read the Y-axis labels. There are too many schools to make identification off the Y-axis easy. This is further compounded with the additional splitting of genders for every school.</p></li>
<li><p>The distance between the X-axis, which shows the scores is too far apart from the error bars. I am unable to decipher what are the actual scores or score range for each error bar.</p></li>
<li><p>The graph is patched side by side, resulting in the Y-axis being repeated 3 times. The order of the School IDs are all the same, hence this creates additional non-data ink, that makes the graph too “busy”.</p></li>
</ol></td>
<td><ol type="1">
<li>To revise the design of a vertically long format and re-make it to a horizontally compact visualization, by using ridge line plots to show the differences in performance only between the best and worst schools.</li>
<li>To minimize axis labels, we will only identify and plot the top &amp; bottom 5 schools instead.</li>
</ol></td>
</tr>
</tbody>
</table>
<p>Examining the subset used for the original plot in more detail.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">head</span>(pvmathgender))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  CNTSCHID ST004D01T Freq   Mean  s.e.    SD   s.e
1 70200001      Male   55 725.21  9.34 59.23  6.38
2 70200002    Female   15 537.70 27.07 80.64 15.79
3 70200002      Male   22 535.13 21.92 96.03 20.81
4 70200003    Female    7 739.65 22.04 39.42 14.39
5 70200003      Male   29 739.99 14.58 62.67  8.56
6 70200004    Female   28 505.32 19.68 91.11 11.94</code></pre>
</div>
</div>
<p>The&nbsp;<em>pvmathgender</em>&nbsp;subset table has 307 observations and 7 variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Conclusion
</div>
</div>
<div class="callout-body-container callout-body">
<p>The data subset can only be used to visualize the mean scores of the two genders for every school.</p>
<p>The original graph is not of a suitable design to help readers easily and quickly understand the disparity in performances between schools. By adding a further split into genders per school further complicates this visually.</p>
<p>I will use a new compact visualization to enable the reader to quickly identify the disparity in school performance. Instead of analyzing all schools, we can narrow our focus just to the “best” and “worst” schools.</p>
</div>
</div>
</section>
<section id="sketch-of-proposed-design-4" class="level3">
<h3 class="anchored" data-anchor-id="sketch-of-proposed-design-4">3.5.2 Sketch of Proposed Design</h3>
<p>Rough sketch of proposed design is shown below.</p>
<p><img src="images/clipboard-2581295591.png" class="img-fluid"></p>
</section>
<section id="remake-4" class="level3">
<h3 class="anchored" data-anchor-id="remake-4">3.5.3 Remake</h3>
<p>The author had previously extracted the mean scores per school across the 3 subjects. I will use the same sub sets to extract the top and bottom 5 School IDs for each subject.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Identify the top and bottom 5 schools</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>top_bottom_math <span class="ot">&lt;-</span> pvmathsch <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Mean) <span class="sc">%&gt;%</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, (<span class="fu">n</span>()<span class="sc">-</span><span class="dv">4</span>)<span class="sc">:</span><span class="fu">n</span>())) <span class="sc">%&gt;%</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(CNTSCHID)</span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>top_bottom_read <span class="ot">&lt;-</span> pvreadsch <span class="sc">%&gt;%</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Mean) <span class="sc">%&gt;%</span></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, (<span class="fu">n</span>()<span class="sc">-</span><span class="dv">4</span>)<span class="sc">:</span><span class="fu">n</span>())) <span class="sc">%&gt;%</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(CNTSCHID)</span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>top_bottom_scie <span class="ot">&lt;-</span> pvsciesch <span class="sc">%&gt;%</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Mean) <span class="sc">%&gt;%</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>, (<span class="fu">n</span>()<span class="sc">-</span><span class="dv">4</span>)<span class="sc">:</span><span class="fu">n</span>())) <span class="sc">%&gt;%</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(CNTSCHID)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Next I will filter the data set and obtain PV1 student scores from the top and bottom 5 schools only.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Filter the original dataset to include only the selected schools</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a>top_bottom_mathsch <span class="ot">&lt;-</span> stu_qqq_SG <span class="sc">%&gt;%</span></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CNTSCHID <span class="sc">%in%</span> top_bottom_math)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>top_bottom_readsch <span class="ot">&lt;-</span> stu_qqq_SG <span class="sc">%&gt;%</span></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CNTSCHID <span class="sc">%in%</span> top_bottom_read)</span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-9"><a href="#cb45-9" aria-hidden="true" tabindex="-1"></a>top_bottom_sciesch <span class="ot">&lt;-</span> stu_qqq_SG <span class="sc">%&gt;%</span></span>
<span id="cb45-10"><a href="#cb45-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(CNTSCHID <span class="sc">%in%</span> top_bottom_scie)</span>
<span id="cb45-11"><a href="#cb45-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-12"><a href="#cb45-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-13"><a href="#cb45-13" aria-hidden="true" tabindex="-1"></a>top_bottom_mathsch <span class="ot">&lt;-</span> top_bottom_mathsch <span class="sc">%&gt;%</span></span>
<span id="cb45-14"><a href="#cb45-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">CNTSCHID =</span> <span class="fu">factor</span>(CNTSCHID, <span class="at">levels =</span> top_bottom_math))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Lastly, I will use the code below to create Ridgeline plots for the top and bottom 5 schools.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>math_5 <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(top_bottom_mathsch, <span class="fu">aes</span>(<span class="at">x =</span> PV1MATH, <span class="at">y =</span> <span class="fu">factor</span>(CNTSCHID), <span class="at">fill =</span> <span class="fu">after_stat</span>(x))) <span class="sc">+</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density_ridges</span>(</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"density_ridges_gradient"</span>,</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">calc_ecdf =</span> <span class="cn">TRUE</span>, </span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="dv">4</span>,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantile_lines =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Math Scores"</span>,</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"green"</span>),</span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="fu">min</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">length.out =</span> <span class="dv">5</span>)</span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim=</span><span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span></span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>        <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>)  </span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>  )  <span class="sc">+</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"School ID"</span>, <span class="at">x =</span> <span class="cn">NULL</span>, <span class="at">title =</span> <span class="st">"Math Scores for the Top and Bottom 5 Schools"</span>) <span class="sc">+</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>)  </span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>math_5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_Ex3_files/figure-html/unnamed-chunk-40-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Revised plot
</div>
</div>
<div class="callout-body-container callout-body">
<p>By narrowing our focus to compare only the top and bottom 5 schools, we are able to clearly infer the actual difference between the “best” and “worst” schools.</p>
<p>The new revised plot is now more visually compact, and allows readers to quickly examine the difference in performance between the top and bottom 5 schools.</p>
</div>
</div>
<p>Besides this, we can also examine the differences in performance between Male and Female students in these top and bottom 5 schools, using the code below.</p>
<div class="cell">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert ST004D01T to a factor with more meaningful level names</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a>top_bottom_mathsch<span class="sc">$</span>ST004D01T <span class="ot">&lt;-</span> <span class="fu">factor</span>(top_bottom_mathsch<span class="sc">$</span>ST004D01T, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>), <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"Girls"</span>, <span class="st">"Boys"</span>))</span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot</span></span>
<span id="cb47-5"><a href="#cb47-5" aria-hidden="true" tabindex="-1"></a>math_gender_ridges <span class="ot">&lt;-</span> <span class="fu">ggplot</span>(top_bottom_mathsch, </span>
<span id="cb47-6"><a href="#cb47-6" aria-hidden="true" tabindex="-1"></a>                             <span class="fu">aes</span>(<span class="at">x =</span> PV1MATH, </span>
<span id="cb47-7"><a href="#cb47-7" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">y =</span> <span class="fu">interaction</span>(CNTSCHID, ST004D01T),  <span class="co"># Create interaction between school ID and gender</span></span>
<span id="cb47-8"><a href="#cb47-8" aria-hidden="true" tabindex="-1"></a>                                 <span class="at">fill =</span> <span class="fu">after_stat</span>(x))) <span class="sc">+</span></span>
<span id="cb47-9"><a href="#cb47-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_density_ridges</span>(</span>
<span id="cb47-10"><a href="#cb47-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">geom =</span> <span class="st">"density_ridges_gradient"</span>,</span>
<span id="cb47-11"><a href="#cb47-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">calc_ecdf =</span> <span class="cn">TRUE</span>, </span>
<span id="cb47-12"><a href="#cb47-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="dv">4</span>,</span>
<span id="cb47-13"><a href="#cb47-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantile_lines =</span> <span class="cn">TRUE</span></span>
<span id="cb47-14"><a href="#cb47-14" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-15"><a href="#cb47-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradientn</span>(</span>
<span id="cb47-16"><a href="#cb47-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">"Math Scores"</span>,</span>
<span id="cb47-17"><a href="#cb47-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">colors =</span> <span class="fu">c</span>(<span class="st">"red"</span>, <span class="st">"green"</span>),</span>
<span id="cb47-18"><a href="#cb47-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="fu">min</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)),</span>
<span id="cb47-19"><a href="#cb47-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="fu">min</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="fu">max</span>(top_bottom_mathsch<span class="sc">$</span>PV1MATH, <span class="at">na.rm =</span> <span class="cn">TRUE</span>), <span class="at">length.out =</span> <span class="dv">5</span>)</span>
<span id="cb47-20"><a href="#cb47-20" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb47-21"><a href="#cb47-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_cartesian</span>(<span class="at">xlim =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1000</span>)) <span class="sc">+</span></span>
<span id="cb47-22"><a href="#cb47-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ridges</span>() <span class="sc">+</span></span>
<span id="cb47-23"><a href="#cb47-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"School ID and Gender"</span>, <span class="at">x =</span> <span class="st">"Math Scores"</span>, <span class="at">title =</span> <span class="st">"Math Scores for the Top and Bottom 5 Schools by Gender"</span>) <span class="sc">+</span></span>
<span id="cb47-24"><a href="#cb47-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb47-25"><a href="#cb47-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"none"</span>,</span>
<span id="cb47-26"><a href="#cb47-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">plot.title =</span> <span class="fu">element_text</span>(<span class="at">size =</span> <span class="dv">15</span>),</span>
<span id="cb47-27"><a href="#cb47-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">axis.text.y =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">0</span>, <span class="at">hjust =</span> <span class="fl">0.5</span>)  </span>
<span id="cb47-28"><a href="#cb47-28" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb47-29"><a href="#cb47-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb47-30"><a href="#cb47-30" aria-hidden="true" tabindex="-1"></a>math_gender_ridges</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="R_Ex3_files/figure-html/unnamed-chunk-41-1.png" class="img-fluid figure-img" width="960"></p>
</figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>School IDs 70200001, 70200139 and 70200110 does not have any data on Female students and are likely a single-gender school.</p>
</div>
</div>
</section>
</section>
</section>
<section id="learning-points" class="level1">
<h1>4. Learning Points</h1>
<p>Take-home exercise 2 serves as an extension for take-home exercise 1 and has provided me with an opportunity to reflect on what I have done for take-home exercise 1.</p>
<p>Below are my key takeaways for this assignment:</p>
<ol type="1">
<li><strong>Underlying data is crucial</strong></li>
</ol>
<p>It is important to understand the underlying data or data set used for the visualization, in order to better understand the design choices behind the visualizations.</p>
<p>For example, in this case, the author had decided to extract composite PV scores instead of utilizing PV1 scores or the average of the PV scores. This decision had limited the author’s ability to create more infomative visualizations due to the smaller data set.</p>
<ol start="2" type="1">
<li><strong>Less is more</strong></li>
</ol>
<p>As long as the visualization is clear, and enables the reader to obtain information clearly and quickly, it is a good data visualization.</p>
<p>Rather than striving to pack as much information within a composite plot, it is important to understand how much time and “bandwidth” readers actually have.</p>
<p>For example, combining multiple complex plots at the same time may confuse readers instead of enlightening them.</p>
<p>Static visualizations come with their own limitations. Understanding these limits are important to design good visuals which are easily understood by readers.</p>
<p>Labels, annotations and legends serve to inform, but also increases duplicity. Instead of worrying whether there are enough labels to explain and guide readers, it is better to focus on how easy the reader can obtain that information.</p>
<ol start="3" type="1">
<li><strong>What is the information you want to communicate?</strong></li>
</ol>
<p>It is important to understand the purpose, intent and effect of the visualization. If we are confused about what we want to communicate, readers will feel the same way as well.</p>
<ol start="4" type="1">
<li><strong>Learning from Peers</strong></li>
</ol>
<p>Referencing classmates’ works have given me new perspectives, ideas and best practices on how to approach the same problems. I have also learnt a lot in terms of efficient coding and short cuts. Being able to organically learn in this matter is beneficial, and allows us to retain the knowledge for longer, compared to using shortcuts like Uncle Google or Chat GPT.</p>



</section>

<a onclick="window.scrollTo(0, 0); return false;" role="button" id="quarto-back-to-top"><i class="bi bi-arrow-up"></i> Back to top</a><div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography" id="quarto-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" data-entry-spacing="0" role="list">
<div id="ref-patil2021" class="csl-entry" role="listitem">
Patil, Indrajeet. 2021. <span>“Visualizations with Statistical Details: The ’Ggstatsplot’ Approach.”</span> <em>Journal of Open Source Software</em> 6 (61): 3167. <a href="https://doi.org/10.21105/joss.03167">https://doi.org/10.21105/joss.03167</a>.
</div>
</div></section></div></main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>